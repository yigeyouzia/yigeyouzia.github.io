<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>JVM-2.åƒåœ¾å›æ”¶ | cytçš„ç¬”è®°å±‹</title><meta name="author" content="cyt"><meta name="copyright" content="cyt"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="JVMåƒåœ¾å›æ”¶">
<meta property="og:type" content="article">
<meta property="og:title" content="JVM-2.åƒåœ¾å›æ”¶">
<meta property="og:url" content="https://youcyt.ltd/post/java%E5%AD%A6%E4%B9%A0/jvm/2JVM-%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6.html">
<meta property="og:site_name" content="cytçš„ç¬”è®°å±‹">
<meta property="og:description" content="JVMåƒåœ¾å›æ”¶">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://picgo-1314714026.cos.ap-nanjing.myqcloud.com/img/image-20251028145205154.png">
<meta property="article:published_time" content="2025-10-30T05:08:00.000Z">
<meta property="article:modified_time" content="2025-11-11T03:04:42.995Z">
<meta property="article:author" content="cyt">
<meta property="article:tag" content="java">
<meta property="article:tag" content="JVM">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://picgo-1314714026.cos.ap-nanjing.myqcloud.com/img/image-20251028145205154.png"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "JVM-2.åƒåœ¾å›æ”¶",
  "url": "https://youcyt.ltd/post/java%E5%AD%A6%E4%B9%A0/jvm/2JVM-%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6.html",
  "image": "https://picgo-1314714026.cos.ap-nanjing.myqcloud.com/img/image-20251028145205154.png",
  "datePublished": "2025-10-30T05:08:00.000Z",
  "dateModified": "2025-11-11T03:04:42.995Z",
  "author": [
    {
      "@type": "Person",
      "name": "cyt",
      "url": "https://youcyt.ltd"
    }
  ]
}</script><link rel="shortcut icon" href="/img/favicon.ico"><link rel="canonical" href="https://youcyt.ltd/post/java%E5%AD%A6%E4%B9%A0/jvm/2JVM-%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          const hour = new Date().getHours()
          const isNight = hour <= 6 || hour >= 18
          if (theme === undefined) isNight ? activateDarkMode() : activateLightMode()
          else theme === 'light' ? activateLightMode() : activateDarkMode()
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":false},
  copy: {
    success: 'å¤åˆ¶æˆåŠŸ',
    error: 'å¤åˆ¶å¤±è´¥',
    noSupport: 'æµè§ˆå™¨ä¸æ”¯æŒ'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: 'åˆšåˆš',
    min: 'åˆ†é’Ÿå‰',
    hour: 'å°æ—¶å‰',
    day: 'å¤©å‰',
    month: 'ä¸ªæœˆå‰'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: 'åŠ è½½æ›´å¤š'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'JVM-2.åƒåœ¾å›æ”¶',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><link rel="stylesheet" href="/css/background.css"><meta name="generator" content="Hexo 6.3.0"></head><body><div id="web_bg" style="background-image: url(/img/bg/gongga.jpg);"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/img/other/avatar.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">28</div></a><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">24</div></a><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">7</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> ä¸»é¡µ</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fa fa-graduation-cap"></i><span> åšæ–‡</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/categories/"><i class="fa-fw fa fa-archive"></i><span> åˆ†ç±»</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> æ ‡ç­¾</span></a></li><li><a class="site-page child" href="/archives/"><i class="fa-fw fa fa-folder-open"></i><span> å½’æ¡£</span></a></li></ul></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-list"></i><span> ç”Ÿæ´»</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/shuoshuo/"><i class="fa-fw fa fa-comments-o"></i><span> åˆ†äº«</span></a></li><li><a class="site-page child" href="/photos/"><i class="fa-fw fa fa-camera-retro"></i><span> ç›¸å†Œ</span></a></li><li><a class="site-page child" href="/music/"><i class="fa-fw fa fa-music"></i><span> éŸ³ä¹</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> å½±è§†</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> å‹é“¾</span></a></div><div class="menus_item"><a class="site-page" href="/comment/"><i class="fa-fw fa fa-paper-plane"></i><span> ç•™è¨€æ¿</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> å…³äºç¬”è€…</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(/img/bg/gongga.jpg);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">cytçš„ç¬”è®°å±‹</span></a><a class="nav-page-title" href="/"><span class="site-name">JVM-2.åƒåœ¾å›æ”¶</span><span class="site-name"><i class="fa-solid fa-circle-arrow-left"></i><span>  è¿”å›é¦–é¡µ</span></span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> ä¸»é¡µ</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fa fa-graduation-cap"></i><span> åšæ–‡</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/categories/"><i class="fa-fw fa fa-archive"></i><span> åˆ†ç±»</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> æ ‡ç­¾</span></a></li><li><a class="site-page child" href="/archives/"><i class="fa-fw fa fa-folder-open"></i><span> å½’æ¡£</span></a></li></ul></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-list"></i><span> ç”Ÿæ´»</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/shuoshuo/"><i class="fa-fw fa fa-comments-o"></i><span> åˆ†äº«</span></a></li><li><a class="site-page child" href="/photos/"><i class="fa-fw fa fa-camera-retro"></i><span> ç›¸å†Œ</span></a></li><li><a class="site-page child" href="/music/"><i class="fa-fw fa fa-music"></i><span> éŸ³ä¹</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> å½±è§†</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> å‹é“¾</span></a></div><div class="menus_item"><a class="site-page" href="/comment/"><i class="fa-fw fa fa-paper-plane"></i><span> ç•™è¨€æ¿</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> å…³äºç¬”è€…</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">JVM-2.åƒåœ¾å›æ”¶</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">å‘è¡¨äº</span><time class="post-meta-date-created" datetime="2025-10-30T05:08:00.000Z" title="å‘è¡¨äº 2025-10-30 13:08:00">2025-10-30</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">æ›´æ–°äº</span><time class="post-meta-date-updated" datetime="2025-11-11T03:04:42.995Z" title="æ›´æ–°äº 2025-11-11 11:04:42">2025-11-11</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/java/">java</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">æ€»å­—æ•°:</span><span class="word-count">5k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">é˜…è¯»æ—¶é•¿:</span><span>20åˆ†é’Ÿ</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">æµè§ˆé‡:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><h1 id="äºŒã€åƒåœ¾å›æ”¶"><a href="#äºŒã€åƒåœ¾å›æ”¶" class="headerlink" title="äºŒã€åƒåœ¾å›æ”¶"></a>äºŒã€åƒåœ¾å›æ”¶</h1><h2 id="1-å¦‚ä½•åˆ¤æ–­å¯¹è±¡å¯ä»¥å›æ”¶"><a href="#1-å¦‚ä½•åˆ¤æ–­å¯¹è±¡å¯ä»¥å›æ”¶" class="headerlink" title="1. å¦‚ä½•åˆ¤æ–­å¯¹è±¡å¯ä»¥å›æ”¶"></a>1. å¦‚ä½•åˆ¤æ–­å¯¹è±¡å¯ä»¥å›æ”¶</h2><h3 id="1-1å¼•ç”¨è®¡æ•°æ³•"><a href="#1-1å¼•ç”¨è®¡æ•°æ³•" class="headerlink" title="1.1å¼•ç”¨è®¡æ•°æ³•"></a>1.1å¼•ç”¨è®¡æ•°æ³•</h3><ul>
<li>æœ‰å¼•ç”¨+1</li>
<li>æ–­å¼€å¼•ç”¨-1</li>
<li>å¼Šç«¯ï¼šå¾ªç¯ä¾èµ–é—®é¢˜</li>
<li>javaæœªä½¿ç”¨è¯¥æ–¹æ³•<br><img src="https://picgo-1314714026.cos.ap-nanjing.myqcloud.com/img/image-20251024150012282.png"></li>
</ul>
<h3 id="1-2-å¯è¾¾æ€§åˆ†æè®¡ç®—æ³•"><a href="#1-2-å¯è¾¾æ€§åˆ†æè®¡ç®—æ³•" class="headerlink" title="1.2 å¯è¾¾æ€§åˆ†æè®¡ç®—æ³•"></a>1.2 å¯è¾¾æ€§åˆ†æè®¡ç®—æ³•</h3><ul>
<li><p>Java è™šæ‹Ÿæœºä¸­çš„åƒåœ¾å›æ”¶å™¨é‡‡ç”¨å¯è¾¾æ€§åˆ†ææ¥æ¢ç´¢æ‰€æœ‰å­˜æ´»çš„å¯¹è±¡ </p>
</li>
<li><p>æ‰«æå †ä¸­çš„å¯¹è±¡ï¼Œçœ‹æ˜¯å¦èƒ½å¤Ÿæ²¿ç€ GC Rootå¯¹è±¡ ä¸ºèµ·ç‚¹çš„å¼•ç”¨é“¾æ‰¾åˆ°è¯¥å¯¹è±¡ï¼Œæ‰¾ä¸åˆ°ï¼Œè¡¨ç¤ºå¯ä»¥ å›æ”¶ </p>
</li>
<li><p>å“ªäº›å¯¹è±¡å¯ä»¥ä½œä¸º GC Root ?</p>
</li>
<li><p><code>ç±»æ¯”è‘¡è„ä¸²ğŸ‡ï¼Œæèµ·è‘¡è„è¿˜åœ¨æ ¹ä¸Šçš„å°±ä¸èƒ½è¢«å›æ”¶</code><br><strong>æ¡ˆä¾‹ï¼š</strong></p>
</li>
<li><p>ä¿å­˜jmapçŠ¶æ€</p>
</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">â¯ jps</span><br><span class="line">31112 Main</span><br><span class="line">34184 Jps</span><br><span class="line">33769 Launcher</span><br><span class="line">33770 Demo2_2</span><br><span class="line">â¯ jmap -dump:format=b,live,file=1.bin 33770</span><br><span class="line">Dumping heap to /Users/cyt/workspace/java/jvm-std/jvm/src/cn/itcast/jvm/t2/1.bin ...</span><br><span class="line">Heap dump file created</span><br><span class="line">â¯ jmap -dump:format=b,live,file=2.bin 33770</span><br><span class="line">Dumping heap to /Users/cyt/workspace/java/jvm-std/jvm/src/cn/itcast/jvm/t2/2.bin ...</span><br><span class="line">Heap dump file created</span><br></pre></td></tr></table></figure>
<ul>
<li>ç”¨ <code>mat</code> è½¯ä»¶æ‰“å¼€åˆ†æ</li>
<li><code>GC ROOT</code><br><img src="https://picgo-1314714026.cos.ap-nanjing.myqcloud.com/img/image-20251024151048766.png"></li>
</ul>
<h3 id="1-3-å››ç§å¼•ç”¨"><a href="#1-3-å››ç§å¼•ç”¨" class="headerlink" title="1.3 å››ç§å¼•ç”¨"></a>1.3 å››ç§å¼•ç”¨</h3><ol>
<li><code>å¼ºå¼•ç”¨</code><ul>
<li>åªæœ‰æ‰€æœ‰ GC Roots å¯¹è±¡éƒ½ä¸é€šè¿‡ã€å¼ºå¼•ç”¨ã€‘å¼•ç”¨è¯¥å¯¹è±¡ï¼Œè¯¥å¯¹è±¡æ‰èƒ½è¢«åƒåœ¾å›æ”¶</li>
</ul>
</li>
<li><code>è½¯å¼•ç”¨ï¼ˆSoftReferenceï¼‰</code><ul>
<li>ä»…æœ‰è½¯å¼•ç”¨å¼•ç”¨è¯¥å¯¹è±¡æ—¶ï¼Œåœ¨åƒåœ¾å›æ”¶åï¼Œå†…å­˜ä»ä¸è¶³æ—¶ä¼šå†æ¬¡å‡ºå‘åƒåœ¾å›æ”¶ï¼Œå›æ”¶è½¯å¼•ç”¨ å¯¹è±¡</li>
<li>å¯ä»¥é…åˆå¼•ç”¨é˜Ÿåˆ—æ¥é‡Šæ”¾è½¯å¼•ç”¨è‡ªèº«</li>
</ul>
</li>
<li><code>å¼±å¼•ç”¨ï¼ˆWeakReferenceï¼‰</code><ul>
<li>ä»…æœ‰å¼±å¼•ç”¨å¼•ç”¨è¯¥å¯¹è±¡æ—¶ï¼Œåœ¨åƒåœ¾å›æ”¶æ—¶ï¼Œæ— è®ºå†…å­˜æ˜¯å¦å……è¶³ï¼Œéƒ½ä¼šå›æ”¶å¼±å¼•ç”¨å¯¹è±¡ </li>
<li>å¯ä»¥é…åˆå¼•ç”¨é˜Ÿåˆ—æ¥é‡Šæ”¾å¼±å¼•ç”¨è‡ªèº«</li>
</ul>
</li>
<li><code>è™šå¼•ç”¨ï¼ˆPhantomReferenceï¼‰</code><ul>
<li>å¿…é¡»é…åˆå¼•ç”¨é˜Ÿåˆ—ä½¿ç”¨ï¼Œä¸»è¦é…åˆ ByteBuffer ä½¿ç”¨ï¼Œè¢«å¼•ç”¨å¯¹è±¡å›æ”¶æ—¶ï¼Œä¼šå°†è™šå¼•ç”¨å…¥é˜Ÿï¼Œ ç”± Reference Handler çº¿ç¨‹è°ƒç”¨è™šå¼•ç”¨ç›¸å…³æ–¹æ³•é‡Šæ”¾ç›´æ¥å†…å­˜</li>
</ul>
</li>
<li><code>ç»ˆç»“å™¨å¼•ç”¨ï¼ˆFinalReferenceï¼‰</code><ul>
<li>æ— éœ€æ‰‹åŠ¨ç¼–ç ï¼Œä½†å…¶å†…éƒ¨é…åˆå¼•ç”¨é˜Ÿåˆ—ä½¿ç”¨ï¼Œåœ¨åƒåœ¾å›æ”¶æ—¶ï¼Œç»ˆç»“å™¨å¼•ç”¨å…¥é˜Ÿï¼ˆè¢«å¼•ç”¨å¯¹è±¡ æš‚æ—¶æ²¡æœ‰è¢«å›æ”¶ï¼‰ï¼Œå†ç”± Finalizer çº¿ç¨‹é€šè¿‡ç»ˆç»“å™¨å¼•ç”¨æ‰¾åˆ°è¢«å¼•ç”¨å¯¹è±¡å¹¶è°ƒç”¨å®ƒçš„ finalize æ–¹æ³•ï¼Œç¬¬äºŒæ¬¡ GC æ—¶æ‰èƒ½å›æ”¶è¢«å¼•ç”¨å¯¹è±¡</li>
</ul>
</li>
</ol>
<h4 id="å¼ºè½¯å¼±"><a href="#å¼ºè½¯å¼±" class="headerlink" title="å¼ºè½¯å¼±"></a>å¼ºè½¯å¼±</h4><ul>
<li>å®çº¿æ˜¯å¼ºå¼•ç”¨<br><img src="https://picgo-1314714026.cos.ap-nanjing.myqcloud.com/img/image-20251024152339696.png"></li>
<li><code>è½¯ å¼±å¼•ç”¨æ–­å¼€</code><ul>
<li>å†…å­˜ä¸å¤Ÿå›æ”¶è½¯å¼•ç”¨</li>
<li>æ— è®ºå……è¶³ä¸å¦éƒ½å›æ”¶å¼±å¼•ç”¨</li>
<li>ç„¶åæ”¾å…¥ <code>å¼•ç”¨é˜Ÿåˆ—</code> ï¼ˆå¯ä»¥ä½¿ç”¨ï¼‰<br><img src="https://picgo-1314714026.cos.ap-nanjing.myqcloud.com/img/image-20251024152523935.png"></li>
</ul>
</li>
</ul>
<h4 id="è™šç»ˆ"><a href="#è™šç»ˆ" class="headerlink" title="è™šç»ˆ"></a>è™šç»ˆ</h4><ul>
<li>å¿…é¡»ä½¿ç”¨å¼•ç”¨é˜Ÿåˆ—</li>
<li>è™šå¼•ç”¨ï¼Œæ”¾å…¥å¼•ç”¨é˜Ÿåˆ—ï¼Œçº¿ç¨‹æ‰«æé˜Ÿåˆ—ä¸»åŠ¨é‡Šæ”¾ <code>ç›´æ¥å†…å­˜</code><ul>
<li><img src="https://picgo-1314714026.cos.ap-nanjing.myqcloud.com/img/image-20251024153856837.png" alt="|650"></li>
</ul>
</li>
<li>ç»ˆç»“å¼•ç”¨<ul>
<li>æ¯ä¸ªç±»ç»§æ‰¿è‡ªObjectç±»ï¼Œæœ‰ä¸€ä¸ª<code>finallize</code> æ–¹æ³• ï¼ˆä¸æ¨èï¼‰</li>
<li>æ”¾å…¥å¼•ç”¨é˜Ÿåˆ—</li>
<li><code>ç”±finalizeHandleræ‰«æé‡Šæ”¾</code></li>
</ul>
</li>
</ul>
<h4 id="è½¯å¼•ç”¨"><a href="#è½¯å¼•ç”¨" class="headerlink" title="è½¯å¼•ç”¨"></a>è½¯å¼•ç”¨</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**  </span></span><br><span class="line"><span class="comment"> * æ¼”ç¤ºè½¯å¼•ç”¨  </span></span><br><span class="line"><span class="comment"> * -Xmx20m -XX:+PrintGCDetails -verbose:gc  </span></span><br><span class="line"><span class="comment"> */</span><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo2_3</span> &#123;  </span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">_4MB</span> <span class="operator">=</span> <span class="number">4</span> * <span class="number">1024</span> * <span class="number">1024</span>;  </span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;  </span><br><span class="line"><span class="comment">//        List&lt;byte[]&gt; list = new ArrayList&lt;&gt;();  </span></span><br><span class="line"><span class="comment">//        for (int i = 0; i &lt; 5; i++) &#123;  </span></span><br><span class="line"><span class="comment">//            list.add(new byte[_4MB]);  </span></span><br><span class="line"><span class="comment">//        &#125;  </span></span><br><span class="line"><span class="comment">//  </span></span><br><span class="line"><span class="comment">//        System.in.read();  </span></span><br><span class="line">        soft();  </span><br><span class="line">    &#125;  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">soft</span><span class="params">()</span> &#123;  </span><br><span class="line">        <span class="comment">// list --&gt; SoftReference --&gt; byte[]  </span></span><br><span class="line">  </span><br><span class="line">        List&lt;SoftReference&lt;<span class="type">byte</span>[]&gt;&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();  </span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;  </span><br><span class="line">            SoftReference&lt;<span class="type">byte</span>[]&gt; ref = <span class="keyword">new</span> <span class="title class_">SoftReference</span>&lt;&gt;(<span class="keyword">new</span> <span class="title class_">byte</span>[_4MB]);  </span><br><span class="line">            System.out.println(ref.get());  </span><br><span class="line">            list.add(ref);  </span><br><span class="line">            System.out.println(list.size());  </span><br><span class="line">        &#125;  </span><br><span class="line">        System.out.println(<span class="string">&quot;å¾ªç¯ç»“æŸï¼š&quot;</span> + list.size());  </span><br><span class="line">        <span class="keyword">for</span> (SoftReference&lt;<span class="type">byte</span>[]&gt; ref : list) &#123;  </span><br><span class="line">            System.out.println(ref.get());  </span><br><span class="line">        &#125;  </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>ä½¿ç”¨æ™®é€šæ–¹æ³•åˆ†é…å†…å­˜ å‡ºç°å†…å­˜æº¢å‡º</li>
<li>ä½¿ç”¨è½¯å¼•ç”¨ç»“æœï¼š</li>
<li>è§‚å¯Ÿåˆ°æœ‰å››ä¸ªnull</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">[B@<span class="number">4554617</span>c</span><br><span class="line"><span class="number">1</span></span><br><span class="line">[B@<span class="number">74</span>a14482</span><br><span class="line"><span class="number">2</span></span><br><span class="line">[B@<span class="number">1540e19</span>d</span><br><span class="line"><span class="number">3</span></span><br><span class="line">[B@<span class="number">677327b</span>6</span><br><span class="line"><span class="number">4</span></span><br><span class="line">[GC (Allocation Failure) --[PSYoungGen: <span class="number">5678</span>K-&gt;<span class="number">5678</span>K(<span class="number">7168</span>K)] <span class="number">17966</span>K-&gt;<span class="number">17974</span>K(<span class="number">23552</span>K), <span class="number">0.0006355</span> secs] [Times: user=<span class="number">0.00</span> sys=<span class="number">0.00</span>, real=<span class="number">0.00</span> secs] </span><br><span class="line">[Full GC (Ergonomics) [PSYoungGen: <span class="number">5678</span>K-&gt;<span class="number">4453</span>K(<span class="number">7168</span>K)] [ParOldGen: <span class="number">12296</span>K-&gt;<span class="number">12288</span>K(<span class="number">16384</span>K)] <span class="number">17974</span>K-&gt;<span class="number">16741</span>K(<span class="number">23552</span>K), [Metaspace: <span class="number">3286</span>K-&gt;<span class="number">3286</span>K(<span class="number">1056768</span>K)], <span class="number">0.0018124</span> secs] [Times: user=<span class="number">0.00</span> sys=<span class="number">0.00</span>, real=<span class="number">0.01</span> secs] </span><br><span class="line">[GC (Allocation Failure) --[PSYoungGen: <span class="number">4453</span>K-&gt;<span class="number">4453</span>K(<span class="number">7168</span>K)] <span class="number">16741</span>K-&gt;<span class="number">16749</span>K(<span class="number">23552</span>K), <span class="number">0.0004038</span> secs] [Times: user=<span class="number">0.01</span> sys=<span class="number">0.00</span>, real=<span class="number">0.00</span> secs] </span><br><span class="line">[Full GC (Allocation Failure) [PSYoungGen: <span class="number">4453</span>K-&gt;<span class="number">0</span>K(<span class="number">7168</span>K)] [ParOldGen: <span class="number">12296</span>K-&gt;<span class="number">331</span>K(<span class="number">10240</span>K)] <span class="number">16749</span>K-&gt;<span class="number">331</span>K(<span class="number">17408</span>K), [Metaspace: <span class="number">3286</span>K-&gt;<span class="number">3286</span>K(<span class="number">1056768</span>K)], <span class="number">0.0014106</span> secs] [Times: user=<span class="number">0.00</span> sys=<span class="number">0.00</span>, real=<span class="number">0.00</span> secs] </span><br><span class="line">[B@<span class="number">14</span>ae5a5</span><br><span class="line"><span class="number">5</span></span><br><span class="line">å¾ªç¯ç»“æŸï¼š<span class="number">5</span></span><br><span class="line">null</span><br><span class="line">null</span><br><span class="line">null</span><br><span class="line">null</span><br><span class="line">[B@<span class="number">14</span>ae5a5</span><br><span class="line">Heap</span><br><span class="line"> PSYoungGen      total <span class="number">7168</span>K, used <span class="number">4343</span>K [<span class="number">0x00000007bf800000</span>, <span class="number">0x00000007c0000000</span>, <span class="number">0x00000007c0000000</span>)</span><br><span class="line">  eden space <span class="number">6144</span>K, <span class="number">70</span>% used [<span class="number">0x00000007bf800000</span>,<span class="number">0x00000007bfc3de00</span>,<span class="number">0x00000007bfe00000</span>)</span><br><span class="line">  from space <span class="number">1024</span>K, <span class="number">0</span>% used [<span class="number">0x00000007bff00000</span>,<span class="number">0x00000007bff00000</span>,<span class="number">0x00000007c0000000</span>)</span><br><span class="line">  to   space <span class="number">1024</span>K, <span class="number">0</span>% used [<span class="number">0x00000007bfe00000</span>,<span class="number">0x00000007bfe00000</span>,<span class="number">0x00000007bff00000</span>)</span><br><span class="line"> ParOldGen       total <span class="number">10240</span>K, used <span class="number">331</span>K [<span class="number">0x00000007be800000</span>, <span class="number">0x00000007bf200000</span>, <span class="number">0x00000007bf800000</span>)</span><br><span class="line">  object space <span class="number">10240</span>K, <span class="number">3</span>% used [<span class="number">0x00000007be800000</span>,<span class="number">0x00000007be852e20</span>,<span class="number">0x00000007bf200000</span>)</span><br><span class="line"> Metaspace       used <span class="number">3313</span>K, capacity <span class="number">4564</span>K, committed <span class="number">4864</span>K, reserved <span class="number">1056768</span>K</span><br><span class="line">  class space    used <span class="number">350</span>K, capacity <span class="number">388</span>K, committed <span class="number">512</span>K, reserved <span class="number">1048576</span>K</span><br></pre></td></tr></table></figure>
<h4 id="è½¯å¼•ç”¨-å¼•ç”¨é˜Ÿåˆ—"><a href="#è½¯å¼•ç”¨-å¼•ç”¨é˜Ÿåˆ—" class="headerlink" title="è½¯å¼•ç”¨+å¼•ç”¨é˜Ÿåˆ—"></a>è½¯å¼•ç”¨+å¼•ç”¨é˜Ÿåˆ—</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**  </span></span><br><span class="line"><span class="comment"> * æ¼”ç¤ºè½¯å¼•ç”¨, é…åˆå¼•ç”¨é˜Ÿåˆ—  </span></span><br><span class="line"><span class="comment"> */</span>  </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo2_4</span> &#123;  </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">_4MB</span> <span class="operator">=</span> <span class="number">4</span> * <span class="number">1024</span> * <span class="number">1024</span>;  </span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;  </span><br><span class="line">        List&lt;SoftReference&lt;<span class="type">byte</span>[]&gt;&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();  </span><br><span class="line">  </span><br><span class="line">        <span class="comment">// å¼•ç”¨é˜Ÿåˆ—  </span></span><br><span class="line">        ReferenceQueue&lt;<span class="type">byte</span>[]&gt; queue = <span class="keyword">new</span> <span class="title class_">ReferenceQueue</span>&lt;&gt;();  </span><br><span class="line">  </span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;  </span><br><span class="line">            <span class="comment">// å…³è”äº†å¼•ç”¨é˜Ÿåˆ—ï¼Œ å½“è½¯å¼•ç”¨æ‰€å…³è”çš„ byte[]è¢«å›æ”¶æ—¶ï¼Œè½¯å¼•ç”¨è‡ªå·±ä¼šåŠ å…¥åˆ° queue ä¸­å»  </span></span><br><span class="line">            SoftReference&lt;<span class="type">byte</span>[]&gt; ref = <span class="keyword">new</span> <span class="title class_">SoftReference</span>&lt;&gt;(<span class="keyword">new</span> <span class="title class_">byte</span>[_4MB], queue);  </span><br><span class="line">            System.out.println(ref.get());  </span><br><span class="line">            list.add(ref);  </span><br><span class="line">            System.out.println(list.size());  </span><br><span class="line">        &#125;  </span><br><span class="line">  </span><br><span class="line">        <span class="comment">// ä»é˜Ÿåˆ—ä¸­è·å–æ— ç”¨çš„ è½¯å¼•ç”¨å¯¹è±¡ï¼Œå¹¶ç§»é™¤  </span></span><br><span class="line">        Reference&lt;? <span class="keyword">extends</span> <span class="title class_">byte</span>[]&gt; poll = queue.poll();  </span><br><span class="line">        <span class="keyword">while</span>( poll != <span class="literal">null</span>) &#123;  </span><br><span class="line">            list.remove(poll);  </span><br><span class="line">            poll = queue.poll();  </span><br><span class="line">        &#125;  </span><br><span class="line">  </span><br><span class="line">        System.out.println(<span class="string">&quot;===========================&quot;</span>);  </span><br><span class="line">        <span class="keyword">for</span> (SoftReference&lt;<span class="type">byte</span>[]&gt; reference : list) &#123;  </span><br><span class="line">            System.out.println(reference.get());  </span><br><span class="line">        &#125;  </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>ç»“æœï¼š</li>
<li>å››ä¸ªnullè¢«å›æ”¶</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[B@4554617c</span><br><span class="line">1</span><br><span class="line">[B@74a14482</span><br><span class="line">2</span><br><span class="line">[B@1540e19d</span><br><span class="line">3</span><br><span class="line">[B@677327b6</span><br><span class="line">4</span><br><span class="line">[B@14ae5a5</span><br><span class="line">5</span><br><span class="line">===========================</span><br><span class="line">[B@14ae5a5</span><br></pre></td></tr></table></figure>
<h4 id="å¼±å¼•ç”¨"><a href="#å¼±å¼•ç”¨" class="headerlink" title="å¼±å¼•ç”¨"></a>å¼±å¼•ç”¨</h4><ul>
<li>ä»£ç </li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**  </span></span><br><span class="line"><span class="comment"> * æ¼”ç¤ºå¼±å¼•ç”¨  </span></span><br><span class="line"><span class="comment"> * -Xmx20m -XX:+PrintGCDetails -verbose:gc  </span></span><br><span class="line"><span class="comment"> */</span><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo2_5</span> &#123;  </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">_4MB</span> <span class="operator">=</span> <span class="number">4</span> * <span class="number">1024</span> * <span class="number">1024</span>;  </span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;  </span><br><span class="line">        <span class="comment">//  list --&gt; WeakReference --&gt; byte[]  </span></span><br><span class="line">        List&lt;WeakReference&lt;<span class="type">byte</span>[]&gt;&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();  </span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;  </span><br><span class="line">            WeakReference&lt;<span class="type">byte</span>[]&gt; ref = <span class="keyword">new</span> <span class="title class_">WeakReference</span>&lt;&gt;(<span class="keyword">new</span> <span class="title class_">byte</span>[_4MB]);  </span><br><span class="line">            list.add(ref);  </span><br><span class="line">            <span class="keyword">for</span> (WeakReference&lt;<span class="type">byte</span>[]&gt; w : list) &#123;  </span><br><span class="line">                System.out.print(w.get()+<span class="string">&quot; &quot;</span>);  </span><br><span class="line">            &#125;  </span><br><span class="line">            System.out.println();  </span><br><span class="line">  </span><br><span class="line">        &#125;  </span><br><span class="line">        System.out.println(<span class="string">&quot;å¾ªç¯ç»“æŸï¼š&quot;</span> + list.size());  </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>ç»“æœï¼š</li>
<li><code>null [B@74a14482 [B@1540e19d [B@677327b6 null null null null null [B@330bedb4 </code> nullä¸ºå›æ”¶çš„æ•°ç»„å¯¹è±¡</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">[B@<span class="number">4554617</span>c </span><br><span class="line">[B@<span class="number">4554617</span>c [B@<span class="number">74</span>a14482 </span><br><span class="line">[B@<span class="number">4554617</span>c [B@<span class="number">74</span>a14482 [B@<span class="number">1540e19</span>d </span><br><span class="line">[B@<span class="number">4554617</span>c [B@<span class="number">74</span>a14482 [B@<span class="number">1540e19</span>d [B@<span class="number">677327b</span>6 </span><br><span class="line">[GC (Allocation Failure) [PSYoungGen: <span class="number">5678</span>K-&gt;<span class="number">528</span>K(<span class="number">7168</span>K)] <span class="number">17966</span>K-&gt;<span class="number">12824</span>K(<span class="number">23552</span>K), <span class="number">0.0006993</span> secs] [Times: user=<span class="number">0.00</span> sys=<span class="number">0.00</span>, real=<span class="number">0.00</span> secs] </span><br><span class="line">null [B@<span class="number">74</span>a14482 [B@<span class="number">1540e19</span>d [B@<span class="number">677327b</span>6 [B@<span class="number">14</span>ae5a5  <span class="comment">// ç¬¬äº”æ¬¡ æ”¾ä¸ä¸‹ å›æ”¶ç¬¬ä¸€ä¸ª</span></span><br><span class="line">[GC (Allocation Failure) [PSYoungGen: <span class="number">4747</span>K-&gt;<span class="number">496</span>K(<span class="number">7168</span>K)] <span class="number">17043</span>K-&gt;<span class="number">12792</span>K(<span class="number">23552</span>K), <span class="number">0.0004962</span> secs] [Times: user=<span class="number">0.00</span> sys=<span class="number">0.00</span>, real=<span class="number">0.00</span> secs] </span><br><span class="line">null [B@<span class="number">74</span>a14482 [B@<span class="number">1540e19</span>d [B@<span class="number">677327b</span>6 null [B@<span class="number">7f</span>31245a </span><br><span class="line">[GC (Allocation Failure) [PSYoungGen: <span class="number">4776</span>K-&gt;<span class="number">448</span>K(<span class="number">7168</span>K)] <span class="number">17072</span>K-&gt;<span class="number">12744</span>K(<span class="number">23552</span>K), <span class="number">0.0005593</span> secs] [Times: user=<span class="number">0.00</span> sys=<span class="number">0.00</span>, real=<span class="number">0.00</span> secs] </span><br><span class="line">null [B@<span class="number">74</span>a14482 [B@<span class="number">1540e19</span>d [B@<span class="number">677327b</span>6 null null [B@<span class="number">6</span>d6f6e28 </span><br><span class="line">[GC (Allocation Failure) [PSYoungGen: <span class="number">4705</span>K-&gt;<span class="number">432</span>K(<span class="number">7168</span>K)] <span class="number">17001</span>K-&gt;<span class="number">12728</span>K(<span class="number">23552</span>K), <span class="number">0.0004255</span> secs] [Times: user=<span class="number">0.00</span> sys=<span class="number">0.00</span>, real=<span class="number">0.00</span> secs] </span><br><span class="line">null [B@<span class="number">74</span>a14482 [B@<span class="number">1540e19</span>d [B@<span class="number">677327b</span>6 null null null [B@<span class="number">135f</span>baa4 </span><br><span class="line">[GC (Allocation Failure) [PSYoungGen: <span class="number">4823</span>K-&gt;<span class="number">496</span>K(<span class="number">7168</span>K)] <span class="number">17119</span>K-&gt;<span class="number">12800</span>K(<span class="number">23552</span>K), <span class="number">0.0005512</span> secs] [Times: user=<span class="number">0.01</span> sys=<span class="number">0.00</span>, real=<span class="number">0.00</span> secs] </span><br><span class="line">null [B@<span class="number">74</span>a14482 [B@<span class="number">1540e19</span>d [B@<span class="number">677327b</span>6 null null null null [B@<span class="number">45</span>ee12a7 </span><br><span class="line">[GC (Allocation Failure) [PSYoungGen: <span class="number">4727</span>K-&gt;<span class="number">512</span>K(<span class="number">7168</span>K)] <span class="number">17031</span>K-&gt;<span class="number">12816</span>K(<span class="number">23552</span>K), <span class="number">0.0003853</span> secs] [Times: user=<span class="number">0.00</span> sys=<span class="number">0.00</span>, real=<span class="number">0.00</span> secs] </span><br><span class="line">null [B@<span class="number">74</span>a14482 [B@<span class="number">1540e19</span>d [B@<span class="number">677327b</span>6 null null null null null [B@<span class="number">330b</span>edb4 </span><br><span class="line">å¾ªç¯ç»“æŸï¼š<span class="number">10</span></span><br><span class="line">Heap</span><br><span class="line"> PSYoungGen      total <span class="number">7168</span>K, used <span class="number">4799</span>K [<span class="number">0x00000007bf800000</span>, <span class="number">0x00000007c0000000</span>, <span class="number">0x00000007c0000000</span>)</span><br><span class="line">  eden space <span class="number">6144</span>K, <span class="number">69</span>% used [<span class="number">0x00000007bf800000</span>,<span class="number">0x00000007bfc2fef0</span>,<span class="number">0x00000007bfe00000</span>)</span><br><span class="line">  from space <span class="number">1024</span>K, <span class="number">50</span>% used [<span class="number">0x00000007bff00000</span>,<span class="number">0x00000007bff80000</span>,<span class="number">0x00000007c0000000</span>)</span><br><span class="line">  to   space <span class="number">1024</span>K, <span class="number">0</span>% used [<span class="number">0x00000007bfe00000</span>,<span class="number">0x00000007bfe00000</span>,<span class="number">0x00000007bff00000</span>)</span><br><span class="line"> ParOldGen       total <span class="number">16384</span>K, used <span class="number">12304</span>K [<span class="number">0x00000007be800000</span>, <span class="number">0x00000007bf800000</span>, <span class="number">0x00000007bf800000</span>)</span><br><span class="line">  object space <span class="number">16384</span>K, <span class="number">75</span>% used [<span class="number">0x00000007be800000</span>,<span class="number">0x00000007bf404030</span>,<span class="number">0x00000007bf800000</span>)</span><br><span class="line"> Metaspace       used <span class="number">3363</span>K, capacity <span class="number">4564</span>K, committed <span class="number">4864</span>K, reserved <span class="number">1056768</span>K</span><br><span class="line">  class space    used <span class="number">361</span>K, capacity <span class="number">388</span>K, committed <span class="number">512</span>K, reserved <span class="number">1048576</span>K</span><br></pre></td></tr></table></figure>

<h2 id="2-åƒåœ¾å›æ”¶ç®—æ³•"><a href="#2-åƒåœ¾å›æ”¶ç®—æ³•" class="headerlink" title="2. åƒåœ¾å›æ”¶ç®—æ³•"></a>2. åƒåœ¾å›æ”¶ç®—æ³•</h2><h3 id="2-1-æ ‡è®°æ¸…é™¤æ³•"><a href="#2-1-æ ‡è®°æ¸…é™¤æ³•" class="headerlink" title="2.1 æ ‡è®°æ¸…é™¤æ³•"></a>2.1 æ ‡è®°æ¸…é™¤æ³•</h3><ul>
<li>å®šä¹‰ï¼š Mark Sweep </li>
<li>æ ‡è®°ï¼šæ²¡è¢« <code>GC Root</code>ç›´æ¥å¼•ç”¨çš„å¯¹è±¡æ ‡è®°ä¸ºåƒåœ¾ï¼ˆç°è‰²ï¼‰</li>
<li>ä¼˜ç¼ºç‚¹<ul>
<li>é€Ÿåº¦è¾ƒå¿« </li>
<li>ä¼šé€ æˆå†…å­˜ç¢ç‰‡<br><img src="https://picgo-1314714026.cos.ap-nanjing.myqcloud.com/img/image-20251027190915427.png" alt="|500"></li>
</ul>
</li>
</ul>
<h3 id="2-2-æ ‡è®°æ•´ç†"><a href="#2-2-æ ‡è®°æ•´ç†" class="headerlink" title="2.2 æ ‡è®°æ•´ç†"></a>2.2 æ ‡è®°æ•´ç†</h3><ul>
<li>å®šä¹‰ï¼šMark Compact </li>
<li>æ¸…é™¤ä¹‹å <code>ç´§å‡‘</code>æ“ä½œ ï¼ˆç±»ä¼¼OSï¼‰<ul>
<li>é€Ÿåº¦æ…¢ </li>
<li>æ²¡æœ‰å†…å­˜ç¢ç‰‡<br><img src="https://picgo-1314714026.cos.ap-nanjing.myqcloud.com/img/image-20251027191437401.png"></li>
</ul>
</li>
</ul>
<h3 id="2-3-å¤åˆ¶"><a href="#2-3-å¤åˆ¶" class="headerlink" title="2.3 å¤åˆ¶"></a>2.3 å¤åˆ¶</h3><ul>
<li><p>å®šä¹‰ï¼šCopy </p>
<ul>
<li>ä¸ä¼šæœ‰å†…å­˜ç¢ç‰‡ </li>
<li>éœ€è¦å ç”¨åŒå€å†…å­˜ç©ºé—´</li>
</ul>
</li>
<li><p>æ ‡è®°<br><img src="https://picgo-1314714026.cos.ap-nanjing.myqcloud.com/img/image-20251027191625910.png"></p>
</li>
<li><p>å¤åˆ¶ç§»åŠ¨<br><img src="https://picgo-1314714026.cos.ap-nanjing.myqcloud.com/img/image-20251027191639852.png"></p>
</li>
<li><p>å…¨éƒ¨æ¸…é™¤å·¦è¾¹<br><img src="https://picgo-1314714026.cos.ap-nanjing.myqcloud.com/img/image-20251027191701022.png"></p>
</li>
<li><p>äº¤æ¢<br><img src="https://picgo-1314714026.cos.ap-nanjing.myqcloud.com/img/image-20251027191713789.png"></p>
</li>
</ul>
<h3 id="2-4-æ€»ç»“"><a href="#2-4-æ€»ç»“" class="headerlink" title="2.4 æ€»ç»“"></a>2.4 æ€»ç»“</h3><ul>
<li>ä»¥ä¸Šä¸‰ç§éƒ½ä¼šç”¨åˆ°ï¼Œæ¥ä¸‹æ¥ä»‹ç»<code>åˆ†ä»£åƒåœ¾å›æ”¶æœºåˆ¶</code></li>
</ul>
<h2 id="3-åˆ†ä»£åƒåœ¾å›æ”¶"><a href="#3-åˆ†ä»£åƒåœ¾å›æ”¶" class="headerlink" title="3. åˆ†ä»£åƒåœ¾å›æ”¶"></a>3. åˆ†ä»£åƒåœ¾å›æ”¶</h2><ul>
<li><p>å¯¹è±¡é¦–å…ˆåˆ†é…åœ¨ä¼Šç”¸å›­åŒºåŸŸ </p>
<ul>
<li><img src="https://picgo-1314714026.cos.ap-nanjing.myqcloud.com/img/image-20251027192436583.png"></li>
</ul>
</li>
<li><p>æ–°ç”Ÿä»£ç©ºé—´ä¸è¶³æ—¶ï¼Œè§¦å‘ <code>minor gc</code>ï¼Œä¼Šç”¸å›­å’Œ from <code>å­˜æ´»çš„å¯¹è±¡</code>ä½¿ç”¨ <code>copy å¤åˆ¶</code>åˆ° <code>å¹¸å­˜åŒºto</code> ä¸­ï¼Œå­˜æ´»çš„ å¯¹è±¡<code>å¹´é¾„åŠ  1</code>å¹¶ä¸”äº¤æ¢ <code>fromå’Œto</code> </p>
<ul>
<li><img src="https://picgo-1314714026.cos.ap-nanjing.myqcloud.com/img/image-20251027192931832.png"></li>
</ul>
</li>
<li><p>ç¬¬äºŒæ¬¡ <code>minor gc</code></p>
<ul>
<li><img src="https://picgo-1314714026.cos.ap-nanjing.myqcloud.com/img/image-20251027193427456.png"></li>
</ul>
</li>
<li><p>minor gc ä¼šå¼•å‘ <code>stop the world</code>ï¼Œæš‚åœå…¶å®ƒç”¨æˆ·çš„çº¿ç¨‹ï¼Œç­‰åƒåœ¾å›æ”¶ç»“æŸï¼Œç”¨æˆ·çº¿ç¨‹æ‰æ¢å¤è¿è¡Œ</p>
</li>
<li><p>å½“å¯¹è±¡å¯¿å‘½è¶…è¿‡é˜ˆå€¼æ—¶ï¼Œä¼šæ™‹å‡è‡³è€å¹´ä»£ï¼Œæœ€å¤§å¯¿å‘½æ˜¯15ï¼ˆ4bitï¼‰ </p>
<ul>
<li><img src="https://picgo-1314714026.cos.ap-nanjing.myqcloud.com/img/image-20251027193545860.png"></li>
</ul>
</li>
<li><p>å½“è€å¹´ä»£ç©ºé—´ä¸è¶³ï¼Œä¼šå…ˆå°è¯•è§¦å‘ <code>minor gc</code>ï¼Œå¦‚æœä¹‹åç©ºé—´ä»ä¸è¶³ï¼Œé‚£ä¹ˆè§¦å‘ <code>full gc</code>ï¼ŒSTWçš„æ—¶ é—´æ›´é•¿ã€</p>
<ul>
<li><img src="https://picgo-1314714026.cos.ap-nanjing.myqcloud.com/img/image-20251027193633172.png"></li>
</ul>
</li>
<li><p>ç†è§£</p>
<ul>
<li>æ–°ç”Ÿä»£ç±»ä¼¼æ—¥å¸¸åƒåœ¾ï¼Œæ¯ä¸ªå±…æ°‘æ”¾åœ¨åƒåœ¾æ¡¶</li>
<li>è€å¹´ä»£ç±»ä¼¼ç ´æ¤…å­ï¼Œç ´ç”µè§†ï¼Œå…ˆæš‚å­˜å®¶é‡Œï¼Œå®šæ—¶å¤§æ¸…ç†<br><img src="https://picgo-1314714026.cos.ap-nanjing.myqcloud.com/img/image-20251027192436583.png"></li>
</ul>
</li>
</ul>
<h3 id="3-1-ç›¸å…³VMå‚æ•°"><a href="#3-1-ç›¸å…³VMå‚æ•°" class="headerlink" title="3.1 ç›¸å…³VMå‚æ•°"></a>3.1 ç›¸å…³VMå‚æ•°</h3><table>
<thead>
<tr>
<th>å«ä¹‰</th>
<th>å‚æ•°</th>
</tr>
</thead>
<tbody><tr>
<td>å †åˆå§‹å¤§å°</td>
<td>-Xms</td>
</tr>
<tr>
<td>å †æœ€å¤§å¤§å°</td>
<td>-Xmx æˆ– -XX:MaxHeapSize&#x3D;size</td>
</tr>
<tr>
<td>æ–°ç”Ÿä»£å¤§å°</td>
<td>-Xmn æˆ– (-XX:NewSize&#x3D;size + -XX:MaxNewSize&#x3D;size )</td>
</tr>
<tr>
<td>å¹¸å­˜åŒºæ¯”ä¾‹ï¼ˆåŠ¨æ€ï¼‰</td>
<td>-XX:InitialSurvivorRatio&#x3D;ratio å’Œ -XX:+UseAdaptiveSizePolicy</td>
</tr>
<tr>
<td>å¹¸å­˜åŒºæ¯”ä¾‹</td>
<td>-XX:SurvivorRatio&#x3D;ratio</td>
</tr>
<tr>
<td>æ™‹å‡é˜ˆå€¼</td>
<td>-XX:MaxTenuringThreshold&#x3D;threshold</td>
</tr>
<tr>
<td>æ™‹å‡è¯¦æƒ…</td>
<td>-XX:+PrintTenuringDistribution</td>
</tr>
<tr>
<td>GCè¯¦æƒ…</td>
<td>-XX:+PrintGCDetails -verbose:gc</td>
</tr>
<tr>
<td>FullGC å‰ MinorGC</td>
<td>-XX:+ScavengeBeforeFullGC</td>
</tr>
</tbody></table>
<h3 id="3-2-GCæ¼”ç¤º"><a href="#3-2-GCæ¼”ç¤º" class="headerlink" title="3.2 GCæ¼”ç¤º"></a>3.2 GCæ¼”ç¤º</h3><ul>
<li><p>æ–°ç”Ÿä»£ <code>-Xmn10M</code> 10mb</p>
</li>
<li><p>è€å¹´ä»£ï¼š <code>10mb</code></p>
</li>
<li><p>æ–°ç”Ÿä»£é»˜è®¤<code>1mb fromï¼› 1mb toï¼› eden 8mb</code></p>
</li>
<li><p>æ”¾å…¥7mbï¼Œè§¦å‘GC</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**  </span></span><br><span class="line"><span class="comment"> * æ¼”ç¤ºå†…å­˜çš„åˆ†é…ç­–ç•¥  </span></span><br><span class="line"><span class="comment"> */</span>  </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo2_1</span> &#123;  </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">_512KB</span> <span class="operator">=</span> <span class="number">512</span> * <span class="number">1024</span>;  </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">_1MB</span> <span class="operator">=</span> <span class="number">1024</span> * <span class="number">1024</span>;  </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">_6MB</span> <span class="operator">=</span> <span class="number">6</span> * <span class="number">1024</span> * <span class="number">1024</span>;  </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">_7MB</span> <span class="operator">=</span> <span class="number">7</span> * <span class="number">1024</span> * <span class="number">1024</span>;  </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">_8MB</span> <span class="operator">=</span> <span class="number">8</span> * <span class="number">1024</span> * <span class="number">1024</span>;  </span><br><span class="line">  </span><br><span class="line">    <span class="comment">// -Xms20M -Xmx20M -Xmn10M -XX:+UseSerialGC -XX:+PrintGCDetails -verbose:gc -XX:-ScavengeBeforeFullGC  </span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException &#123;  </span><br><span class="line">        ArrayList&lt;<span class="type">byte</span>[]&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();  </span><br><span class="line">        list.add(<span class="keyword">new</span> <span class="title class_">byte</span>[_7MB]);  </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><p>minor GC é»˜è®¤å†™ <code>GC</code><br><img src="https://picgo-1314714026.cos.ap-nanjing.myqcloud.com/img/image-20251028123913072.png"></p>
</li>
<li><p><code>å¤§å¯¹è±¡å›æ”¶</code></p>
<ul>
<li>æ”¾å…¥8mbï¼Œæ–°ç”Ÿä»£æ”¾ä¸ä¸‹ï¼Œç›´æ¥æ™‹å‡è€å¹´ä»£</li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**  </span></span><br><span class="line"><span class="comment"> * æ¼”ç¤ºå†…å­˜çš„åˆ†é…ç­–ç•¥  </span></span><br><span class="line"><span class="comment"> */</span>  </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo2_1</span> &#123;  </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">_512KB</span> <span class="operator">=</span> <span class="number">512</span> * <span class="number">1024</span>;  </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">_1MB</span> <span class="operator">=</span> <span class="number">1024</span> * <span class="number">1024</span>;  </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">_6MB</span> <span class="operator">=</span> <span class="number">6</span> * <span class="number">1024</span> * <span class="number">1024</span>;  </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">_7MB</span> <span class="operator">=</span> <span class="number">7</span> * <span class="number">1024</span> * <span class="number">1024</span>;  </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">_8MB</span> <span class="operator">=</span> <span class="number">8</span> * <span class="number">1024</span> * <span class="number">1024</span>;  </span><br><span class="line">  </span><br><span class="line">    <span class="comment">// -Xms20M -Xmx20M -Xmn10M -XX:+UseSerialGC -XX:+PrintGCDetails -verbose:gc -XX:-ScavengeBeforeFullGC  </span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException &#123;  </span><br><span class="line">        ArrayList&lt;<span class="type">byte</span>[]&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();  </span><br><span class="line">        list.add(<span class="keyword">new</span> <span class="title class_">byte</span>[_8MB]);  </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="https://picgo-1314714026.cos.ap-nanjing.myqcloud.com/img/image-20251028124426273.png"></p>
<ul>
<li><code>OOM</code> <ul>
<li>å­çº¿ç¨‹å†…å­˜æº¢å‡ºï¼Œä¸ä¼šå¯¼è‡´ä¸»çº¿ç¨‹ç»ˆæ­¢</li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**  </span></span><br><span class="line"><span class="comment"> * æ¼”ç¤ºå†…å­˜çš„åˆ†é…ç­–ç•¥  </span></span><br><span class="line"><span class="comment"> */</span>  </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo2_1</span> &#123;  </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">_512KB</span> <span class="operator">=</span> <span class="number">512</span> * <span class="number">1024</span>;  </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">_1MB</span> <span class="operator">=</span> <span class="number">1024</span> * <span class="number">1024</span>;  </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">_6MB</span> <span class="operator">=</span> <span class="number">6</span> * <span class="number">1024</span> * <span class="number">1024</span>;  </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">_7MB</span> <span class="operator">=</span> <span class="number">7</span> * <span class="number">1024</span> * <span class="number">1024</span>;  </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">_8MB</span> <span class="operator">=</span> <span class="number">8</span> * <span class="number">1024</span> * <span class="number">1024</span>;  </span><br><span class="line">  </span><br><span class="line">    <span class="comment">// -Xms20M -Xmx20M -Xmn10M -XX:+UseSerialGC -XX:+PrintGCDetails -verbose:gc -XX:-ScavengeBeforeFullGC  </span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException &#123;  </span><br><span class="line"><span class="comment">//        ArrayList&lt;byte[]&gt; list = new ArrayList&lt;&gt;();  </span></span><br><span class="line"><span class="comment">//        list.add(new byte[_8MB]);  </span></span><br><span class="line"><span class="comment">//        list.add(new byte[_8MB]);  </span></span><br><span class="line">  </span><br><span class="line">        <span class="comment">// çº¿ç¨‹æ¼”ç¤º  </span></span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(() -&gt; &#123;  </span><br><span class="line">            ArrayList&lt;<span class="type">byte</span>[]&gt; list = <span class="keyword">new</span>  <span class="title class_">ArrayList</span>&lt;&gt;();  </span><br><span class="line">            list.add(<span class="keyword">new</span> <span class="title class_">byte</span>[_8MB]);  </span><br><span class="line">            list.add(<span class="keyword">new</span> <span class="title class_">byte</span>[_8MB]);  </span><br><span class="line">        &#125;).start();  </span><br><span class="line">  </span><br><span class="line">        System.out.println(<span class="string">&quot;sleep....&quot;</span>);  </span><br><span class="line">        Thread.sleep(<span class="number">100000000L</span>);  </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="https://picgo-1314714026.cos.ap-nanjing.myqcloud.com/img/image-20251028124931584.png"></p>
<h2 id="4-åƒåœ¾å›æ”¶å™¨"><a href="#4-åƒåœ¾å›æ”¶å™¨" class="headerlink" title="4. åƒåœ¾å›æ”¶å™¨"></a>4. åƒåœ¾å›æ”¶å™¨</h2><ul>
<li>ä¸²è¡Œ <ul>
<li>å•çº¿ç¨‹ </li>
<li>å †å†…å­˜è¾ƒå°ï¼Œé€‚åˆä¸ªäººç”µè„‘</li>
</ul>
</li>
<li>ååé‡ä¼˜å…ˆ <ul>
<li>å¤šçº¿ç¨‹ </li>
<li>å †å†…å­˜è¾ƒå¤§ï¼Œå¤šæ ¸ cpu </li>
<li>è®©å•ä½æ—¶é—´å†…ï¼Œ<code>STW</code> çš„æ—¶é—´æœ€çŸ­ï¼ˆæ€»å…±æ—¶é—´æœ€çŸ­ï¼‰ <code>0.2+0.2 = 0.4</code>ï¼Œåƒåœ¾å›æ”¶æ—¶é—´å æ¯”æœ€ä½ï¼Œè¿™æ ·å°±ç§°ååé‡é«˜</li>
</ul>
</li>
<li>å“åº”æ—¶é—´ä¼˜å…ˆ <ul>
<li>å¤šçº¿ç¨‹ </li>
<li>å †å†…å­˜è¾ƒå¤§ï¼Œå¤šæ ¸ cpu </li>
<li>å°½å¯èƒ½è®©å•æ¬¡ STW çš„æ—¶é—´æœ€çŸ­ ï¼ˆå•è¯æ—¶é—´æœ€çŸ­ï¼‰<code>0.1 0.1 0.1 0.1 0.1 = 0.5</code></li>
</ul>
</li>
</ul>
<h3 id="4-1-ä¸²è¡Œ"><a href="#4-1-ä¸²è¡Œ" class="headerlink" title="4.1 ä¸²è¡Œ"></a>4.1 ä¸²è¡Œ</h3><ul>
<li>ä½¿ç”¨ï¼š<code>-XX:+UseSerialGC = Serial + SerialOld</code><ul>
<li><code>Serial</code> ä½¿ç”¨å¤åˆ¶ç®—æ³•</li>
<li><code>SerialOld</code> è€å¹´ä»£</li>
</ul>
</li>
<li>å›æ”¶è¿‡ç¨‹<ul>
<li><code>cpu0 1 2 3</code> éƒ½åœ¨è¿è¡Œ</li>
<li>å‘ç”Ÿåƒåœ¾å›æ”¶æ—¶ï¼Œéƒ½åœ¨å®‰å…¨ç‚¹åœä¸‹æ¥</li>
<li>åƒåœ¾å›æ”¶çº¿ç¨‹è¿è¡Œï¼Œå…¶ä»–çº¿ç¨‹é˜»å¡</li>
<li>å›æ”¶å å…¶ä»–çº¿ç¨‹è¿è¡Œ<br><img src="https://picgo-1314714026.cos.ap-nanjing.myqcloud.com/img/image-20251028134446146.png"></li>
</ul>
</li>
</ul>
<h3 id="4-2-ååé‡ä¼˜å…ˆ"><a href="#4-2-ååé‡ä¼˜å…ˆ" class="headerlink" title="4.2 ååé‡ä¼˜å…ˆ"></a>4.2 ååé‡ä¼˜å…ˆ</h3><ul>
<li><p><code>-XX:+UseParallelGC ~ -XX:+UseParallelOldGC</code> </p>
<ul>
<li>å¼€å¯ä¸€ä¸ªè‡ªåŠ¨å¼€å¯å¦ä¸€ä¸ª</li>
</ul>
</li>
<li><p><code>-XX:+UseAdaptiveSizePolicy</code>  </p>
<ul>
<li>é‡‡ç”¨è‡ªé€‚åº”å¤§å°ç­–ç•¥</li>
<li>æ–°ç”Ÿä»£å¤§å°ï¼š<code>Edenå’Œå¹¸å­˜åŒºï¼Œ æ™‹å‡é˜ˆå€¼</code></li>
</ul>
</li>
<li><p><code>-XX:GCTimeRatio=ratio</code> </p>
<ul>
<li>åƒåœ¾å›æ”¶æ—¶é—´å’Œæ€»æ—¶é—´å æ¯” ï¼ˆ1&#x2F;(1+ratio)ï¼‰</li>
</ul>
</li>
<li><p><code>-XX:MaxGCPauseMillis=ms</code> </p>
<ul>
<li>æœ€å¤§æš‚åœæ¯«ç§’æ•°</li>
<li>é»˜è®¤ <code>200ms</code></li>
<li>å’Œä¸Šä¸€ä¸ªé…ç½®çŸ›ç›¾ï¼ŒæŠ˜ä¸­</li>
</ul>
</li>
<li><p><code>-XX:ParallelGCThreads=n</code> </p>
<ul>
<li>æ§åˆ¶çº¿ç¨‹æ•°</li>
</ul>
</li>
<li><p>ä¸åŒç‚¹ï¼š</p>
<ul>
<li>å®‰å…¨ç‚¹åï¼šå¼€å¯å¤šä¸ªåƒåœ¾å›æ”¶çº¿ç¨‹<br><img src="https://picgo-1314714026.cos.ap-nanjing.myqcloud.com/img/image-20251028135258885.png"></li>
</ul>
</li>
</ul>
<h3 id="4-3-å“åº”æ—¶é—´ä¼˜å…ˆ"><a href="#4-3-å“åº”æ—¶é—´ä¼˜å…ˆ" class="headerlink" title="4.3 å“åº”æ—¶é—´ä¼˜å…ˆ"></a>4.3 å“åº”æ—¶é—´ä¼˜å…ˆ</h3><ul>
<li><code>-XX:+UseConcMarkSweepGC ~ -XX:+UseParNewGC ~ SerialOld</code><ul>
<li>è§£é‡Šï¼šconcurrentï¼ˆå¹¶å‘çš„ï¼‰ markï¼ˆæ ‡è®°ï¼‰sweepï¼ˆæ¸…é™¤ï¼‰</li>
<li><strong>CMSï¼ˆConcurrent Mark-Sweepï¼‰</strong> å¹¶å‘æ ‡è®°æ¸…é™¤å›æ”¶æœºåˆ¶ </li>
<li>ï¼ˆåŒºåˆ«å¹¶å‘ä¸å¹¶è¡Œï¼‰å¹¶å‘ï¼šäº¤æ›¿è¿›è¡Œï¼›å¹¶è¡Œï¼šåŒæ—¶å‘ç”Ÿ</li>
<li><code>UseConcMarkSweepGC</code>ï¼šå·¥ä½œåœ¨è€å¹´ä»£</li>
<li><code>UseParNewGC</code>ï¼šå·¥ä½œåœ¨æ–°ç”Ÿä»£</li>
<li>æ–°è€æœ‰ç¢ç‰‡ï¼Œå†…å­˜éƒ½ä¸è¶³æ—¶ï¼Œé€€åŒ–ä¸º <code>SerialOld</code> åšä¸²è¡Œå›æ”¶</li>
</ul>
</li>
<li><code>-XX:ParallelGCThreads=n ~ -XX:ConcGCThreads=threads</code><ul>
<li>è®¾ç½®å¹¶å‘æ•°ï¼šä¸€èˆ¬æ˜¯å 1&#x2F;4</li>
</ul>
</li>
<li><code>-XX:CMSInitiatingOccupancyFraction=percent</code><ul>
<li>cmsæ‰§è¡Œåƒåœ¾å›æ”¶æ—¶çš„å æ¯”</li>
<li>percentç™¾åˆ†æ¯”è¶Šå°ï¼Œæ‰§è¡Œè¶Šæ—©</li>
<li>æ—©æœŸcms 65%å·¦å³</li>
</ul>
</li>
<li><code>-XX:+CMSScavengeBeforeRemark</code><ul>
<li>é‡æ–°æ ‡è®°ï¼šæ–°ç”Ÿä»£å¯èƒ½ç”¨åˆ°è€å¹´ä»£ï¼Œéœ€è¦é‡æ–°æ‰«æä¸€é<br><img src="https://picgo-1314714026.cos.ap-nanjing.myqcloud.com/img/image-20251028140455810.png" alt="|1550"></li>
</ul>
</li>
</ul>
<h3 id="4-1-G1-ï¼ˆé‡ç‚¹ï¼‰"><a href="#4-1-G1-ï¼ˆé‡ç‚¹ï¼‰" class="headerlink" title="4.1 G1 ï¼ˆé‡ç‚¹ï¼‰"></a>4.1 G1 ï¼ˆé‡ç‚¹ï¼‰</h3><p>å®šä¹‰ï¼šGarbage First </p>
<ul>
<li><p>2004 è®ºæ–‡å‘å¸ƒ </p>
</li>
<li><p>2009 JDK 6u14 ä½“éªŒ </p>
</li>
<li><p>2012 JDK 7u4 å®˜æ–¹æ”¯æŒ </p>
</li>
<li><p>2017 JDK 9 é»˜è®¤</p>
</li>
<li><p>é€‚ç”¨åœºæ™¯ </p>
<ul>
<li>åŒæ—¶æ³¨é‡ååé‡ï¼ˆ<code>Throughput</code>ï¼‰å’Œä½å»¶è¿Ÿï¼ˆ<code>Low latency</code>ï¼‰ï¼Œé»˜è®¤çš„æš‚åœç›®æ ‡æ˜¯ 200 ms </li>
<li>é€‚ç”¨è¶…å¤§å †å†…å­˜ï¼Œä¼šå°†å †åˆ’åˆ†ä¸ºå¤šä¸ªå¤§å°ç›¸ç­‰çš„ <code>Region</code> </li>
<li>æ•´ä½“ä¸Šæ˜¯ <code>æ ‡è®°+æ•´ç†</code> ç®—æ³•ï¼Œä¸¤ä¸ªåŒºåŸŸï¼ˆRegionï¼‰ä¹‹é—´æ˜¯ <code>å¤åˆ¶</code> ç®—æ³•<br><strong>ç›¸å…³ JVM å‚æ•°</strong>ï¼š</li>
</ul>
</li>
<li><p><code>-XX:+UseG1GC</code> </p>
<ul>
<li>JDK8 ä¸é»˜è®¤ï¼Œéœ€è¦æ‰‹åŠ¨å¼€å¯</li>
<li>JDK9 åŠä»¥åè‡ªåŠ¨å¼€å¯</li>
</ul>
</li>
<li><p><code>-XX:G1HeapRegionSize=size</code> </p>
<ul>
<li>è®¾ç½®åŒºåŸŸå¤§å° ï¼ˆ1 2 4 8 16ï¼‰</li>
</ul>
</li>
<li><p><code>-XX:MaxGCPauseMillis=time</code></p>
</li>
</ul>
<h4 id="1ï¼‰G1åƒåœ¾å›æ”¶é˜¶æ®µ"><a href="#1ï¼‰G1åƒåœ¾å›æ”¶é˜¶æ®µ" class="headerlink" title="1ï¼‰G1åƒåœ¾å›æ”¶é˜¶æ®µ"></a>1ï¼‰G1åƒåœ¾å›æ”¶é˜¶æ®µ</h4><ul>
<li>æ–°ç”Ÿä»£åƒåœ¾æ”¶é›†</li>
<li>æ–°ç”Ÿä»£åƒåœ¾æ”¶é›†+å¹¶å‘æ ‡è®°</li>
<li>æ··åˆæ”¶é›†</li>
<li><strong>å°†å†…å­˜åˆ†ä¸ºå¾ˆå¤šåŒºåŸŸï¼š<code>Region</code>ï¼Œæ¯ä¸ªåŒºåŸŸéƒ½å¯ä½œä¸º<code>eden å¹¸å­˜åŒº è€å¹´ä»£</code></strong><br><img src="https://picgo-1314714026.cos.ap-nanjing.myqcloud.com/img/image-20251028143900767.png"></li>
</ul>
<h4 id="2ï¼‰Young-Collectionï¼ˆæ–°ç”Ÿä»£å›æ”¶ï¼‰"><a href="#2ï¼‰Young-Collectionï¼ˆæ–°ç”Ÿä»£å›æ”¶ï¼‰" class="headerlink" title="2ï¼‰Young Collectionï¼ˆæ–°ç”Ÿä»£å›æ”¶ï¼‰"></a>2ï¼‰Young Collectionï¼ˆæ–°ç”Ÿä»£å›æ”¶ï¼‰</h4><ul>
<li>ä¼š STW </li>
<li>æ­¤æ—¶å…¶ä»–çº¿ç¨‹é˜»å¡ï¼Œåªæœ‰åƒåœ¾å›æ”¶çº¿ç¨‹è¿è¡Œ</li>
<li>Eï¼šeden ä¼Šç”¸å›­<br><img src="https://picgo-1314714026.cos.ap-nanjing.myqcloud.com/img/image-20251028144310384.png" alt="|475"></li>
<li>æ–°ç”ŸåŒºï¼šedenå¤åˆ¶copyåˆ° Sï¼ˆå¹¸å­˜åŒºServivalï¼‰<br><img src="https://picgo-1314714026.cos.ap-nanjing.myqcloud.com/img/image-20251028144443202.png"></li>
<li>å¹¸å­˜åŒºæ™‹å‡åˆ°è€å¹´ä»£ï¼ˆOï¼‰<ul>
<li>éƒ¨åˆ†å¯å¤åˆ¶åˆ°æ–°çš„å¹¸å­˜åŒº<br><img src="https://picgo-1314714026.cos.ap-nanjing.myqcloud.com/img/image-20251028144509041.png"></li>
</ul>
</li>
</ul>
<h4 id="3ï¼‰Young-Collection-CMï¼ˆå¹¶å‘æ ‡è®°ï¼‰"><a href="#3ï¼‰Young-Collection-CMï¼ˆå¹¶å‘æ ‡è®°ï¼‰" class="headerlink" title="3ï¼‰Young Collection + CMï¼ˆå¹¶å‘æ ‡è®°ï¼‰"></a>3ï¼‰Young Collection + CMï¼ˆå¹¶å‘æ ‡è®°ï¼‰</h4><ul>
<li>åœ¨ Young GC æ—¶ä¼šè¿›è¡Œ GC Root çš„åˆå§‹æ ‡è®° </li>
<li>è€å¹´ä»£å ç”¨å †ç©ºé—´æ¯”ä¾‹è¾¾åˆ°é˜ˆå€¼æ—¶ï¼Œè¿›è¡Œ<code>å¹¶å‘æ ‡è®°CM</code>ï¼ˆä¸ä¼š STWï¼‰ï¼Œç”±ä¸‹é¢çš„ JVM å‚æ•°å†³å®š </li>
<li><code>-XX:InitiatingHeapOccupancyPercent=percent </code> ï¼ˆé»˜è®¤45%ï¼‰<br><img src="https://picgo-1314714026.cos.ap-nanjing.myqcloud.com/img/image-20251028145043631.png" alt="|575"></li>
</ul>
<h4 id="4ï¼‰Mixed-Collection"><a href="#4ï¼‰Mixed-Collection" class="headerlink" title="4ï¼‰Mixed Collection"></a>4ï¼‰Mixed Collection</h4><p>ä¼šå¯¹ Eã€Sã€O è¿›è¡Œå…¨é¢åƒåœ¾å›æ”¶</p>
<ul>
<li><p>æœ€ç»ˆæ ‡è®°ï¼ˆRemarkï¼‰ä¼š STW </p>
</li>
<li><p>æ‹·è´å­˜æ´»ï¼ˆEvacuationï¼‰ä¼š STW</p>
</li>
<li><p><code>-XX:MaxGCPauseMillis=ms </code></p>
</li>
<li><p>éƒ¨åˆ†è€å¹´ä»£ä¼šå›æ”¶åˆ° <code>æ–°çš„è€å¹´ä»£åŒºåŸŸ</code></p>
<ul>
<li>æ ¹æ®æš‚åœæ—¶é—´</li>
<li>å›æ”¶æœ€å¤šçš„ è€å¹´ä»£ <code>copyç®—æ³•</code></li>
</ul>
</li>
<li><p>æ–°ç”Ÿä»£æœªè¾¾åˆ°é˜ˆå€¼æ”¾å…¥ <code>æ–°çš„æ–°ç”Ÿä»£</code></p>
<ul>
<li>è¾¾åˆ°é˜ˆå€¼çš„æ”¾å…¥ <code>è€å¹´ä»£</code><br><img src="https://picgo-1314714026.cos.ap-nanjing.myqcloud.com/img/image-20251028145205154.png" alt="|550"></li>
</ul>
</li>
</ul>
<h4 id="5ï¼‰-Full-GC"><a href="#5ï¼‰-Full-GC" class="headerlink" title="5ï¼‰ Full GC"></a>5ï¼‰ Full GC</h4><ul>
<li>SerialGC <ul>
<li>æ–°ç”Ÿä»£å†…å­˜ä¸è¶³å‘ç”Ÿçš„åƒåœ¾æ”¶é›† - minor gc </li>
<li>è€å¹´ä»£å†…å­˜ä¸è¶³å‘ç”Ÿçš„åƒåœ¾æ”¶é›† - full gc</li>
</ul>
</li>
<li>ParallelGC <ul>
<li>æ–°ç”Ÿä»£å†…å­˜ä¸è¶³å‘ç”Ÿçš„åƒåœ¾æ”¶é›† - minor gc </li>
<li>è€å¹´ä»£å†…å­˜ä¸è¶³å‘ç”Ÿçš„åƒåœ¾æ”¶é›† - full gc</li>
</ul>
</li>
<li>CMS <ul>
<li>æ–°ç”Ÿä»£å†…å­˜ä¸è¶³å‘ç”Ÿçš„åƒåœ¾æ”¶é›† - minor gc </li>
<li>è€å¹´ä»£å†…å­˜ä¸è¶³</li>
</ul>
</li>
<li>G1 <ul>
<li>æ–°ç”Ÿä»£å†…å­˜ä¸è¶³å‘ç”Ÿçš„åƒåœ¾æ”¶é›† - minor gc </li>
<li>è€å¹´ä»£å†…å­˜ä¸è¶³<ul>
<li>CM + æ··åˆ</li>
<li>å›æ”¶é€Ÿåº¦è·Ÿä¸ä¸Šï¼šfull gc</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="6-Young-Collection-è·¨ä»£å¼•ç”¨"><a href="#6-Young-Collection-è·¨ä»£å¼•ç”¨" class="headerlink" title="6) Young Collection è·¨ä»£å¼•ç”¨"></a>6) Young Collection è·¨ä»£å¼•ç”¨</h4><ul>
<li><p>æ–°ç”Ÿä»£å›æ”¶çš„è·¨ä»£å¼•ç”¨ï¼ˆè€å¹´ä»£å¼•ç”¨æ–°ç”Ÿä»£ï¼‰é—®é¢˜</p>
</li>
<li><p>å¯¹è€å¹´ä»£åˆ’åˆ†ä¸ºå¤šä¸ª <code>512kb</code>å¡</p>
<ul>
<li>å¼±å¼•ç”¨äº†edenï¼Œ åˆ™æ ‡è®°ä¸º <code>è„å¡</code></li>
<li>æ¯æ¬¡GC Rootæ‰«æåˆ™åªç®¡è„å¡<br><img src="https://picgo-1314714026.cos.ap-nanjing.myqcloud.com/img/image-20251028172143936.png" alt="|625"></li>
</ul>
</li>
<li><p>å¡è¡¨ä¸ <code>Remembered Set</code></p>
<ul>
<li>æ–°ç”Ÿä»£æœ‰ <code>Remembered Set</code>ï¼Œè®°å½•å“ªäº›å¼•ç”¨äº†è‡ªå·±</li>
</ul>
</li>
<li><p>åœ¨å¼•ç”¨å˜æ›´æ—¶é€šè¿‡ <code>post-write barrier</code> + <code>dirty card queue</code> </p>
<ul>
<li>å¼€çº¿ç¨‹å¼‚æ­¥æ›´æ”¹å¡è¡¨</li>
</ul>
</li>
<li><p><code>concurrent refinement threads</code> æ›´æ–° <code>Remembered Set</code><br><img src="https://picgo-1314714026.cos.ap-nanjing.myqcloud.com/img/image-20251028172229083.png" alt="|650"></p>
</li>
</ul>
<h4 id="7-Remarkï¼ˆé‡æ–°æ ‡è®°ï¼‰"><a href="#7-Remarkï¼ˆé‡æ–°æ ‡è®°ï¼‰" class="headerlink" title="7) Remarkï¼ˆé‡æ–°æ ‡è®°ï¼‰"></a>7) Remarkï¼ˆé‡æ–°æ ‡è®°ï¼‰</h4><ul>
<li><p><code>pre-write barrier + satb_mark_queue</code>  å†™å±éšœ+é˜Ÿåˆ—</p>
<ul>
<li>é»‘è‰²ï¼šå¤„ç†å®Œ ï¼ˆä¸æ˜¯åƒåœ¾ï¼‰</li>
<li>ç°è‰²ï¼šå¤„ç†ä¸­</li>
<li>ç™½è‰²ï¼šæ²¡å¤„ç† ï¼ˆåƒåœ¾ï¼‰<br><img src="https://picgo-1314714026.cos.ap-nanjing.myqcloud.com/img/image-20251028180834008.png"></li>
</ul>
</li>
<li><p>remark<br><img src="https://picgo-1314714026.cos.ap-nanjing.myqcloud.com/img/image-20251028180949895.png" alt="|350"></p>
</li>
<li><p>åŠ å…¥é˜Ÿåˆ—<br><img src="https://picgo-1314714026.cos.ap-nanjing.myqcloud.com/img/image-20251028181145750.png" alt="|500"></p>
</li>
</ul>
<h4 id="8-JDK-8u20-å­—ç¬¦ä¸²å»é‡"><a href="#8-JDK-8u20-å­—ç¬¦ä¸²å»é‡" class="headerlink" title="8) JDK 8u20 å­—ç¬¦ä¸²å»é‡"></a>8) JDK 8u20 å­—ç¬¦ä¸²å»é‡</h4><ul>
<li>ä¼˜ç‚¹ï¼šèŠ‚çœå¤§é‡å†…å­˜ </li>
<li>ç¼ºç‚¹ï¼šç•¥å¾®å¤šå ç”¨äº† cpu æ—¶é—´ï¼Œæ–°ç”Ÿä»£å›æ”¶æ—¶é—´ç•¥å¾®å¢åŠ </li>
<li><code>-XX:+UseStringDeduplicatio</code></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">s1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(<span class="string">&quot;hello&quot;</span>); <span class="comment">// char[&#123;&#x27;h&#x27;,&#x27;e&#x27;,&#x27;l&#x27;,&#x27;l&#x27;,&#x27;o&#x27;&#125; </span></span><br><span class="line"></span><br><span class="line"><span class="type">String</span> <span class="variable">s2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(<span class="string">&quot;hello&quot;</span>); <span class="comment">// char[]&#123;&#x27;h&#x27;,&#x27;e&#x27;,&#x27;l&#x27;,&#x27;l&#x27;,&#x27;o&#x27;&#125; </span></span><br></pre></td></tr></table></figure>
<ul>
<li>å°†æ‰€æœ‰æ–°åˆ†é…çš„å­—ç¬¦ä¸²æ”¾å…¥ä¸€ä¸ªé˜Ÿåˆ— </li>
<li>å½“æ–°ç”Ÿä»£å›æ”¶æ—¶ï¼ŒG1å¹¶å‘æ£€æŸ¥æ˜¯å¦æœ‰å­—ç¬¦ä¸²é‡å¤ </li>
<li>å¦‚æœå®ƒä»¬å€¼ä¸€æ ·ï¼Œè®©å®ƒä»¬å¼•ç”¨åŒä¸€ä¸ª char[]</li>
<li>æ³¨æ„ï¼Œä¸ <code>String.intern()</code> ä¸ä¸€æ ·<ul>
<li><code>String.intern()</code> å…³æ³¨çš„æ˜¯å­—ç¬¦ä¸²å¯¹è±¡</li>
<li>è€Œå­—ç¬¦ä¸²å»é‡å…³æ³¨çš„æ˜¯ char[]</li>
<li>åœ¨JVM å†…éƒ¨ï¼Œä½¿ç”¨äº†ä¸åŒçš„å­—ç¬¦ä¸²è¡¨</li>
</ul>
</li>
</ul>
<h4 id="9-JDK-8u40-å¹¶å‘æ ‡è®°ç±»å¸è½½"><a href="#9-JDK-8u40-å¹¶å‘æ ‡è®°ç±»å¸è½½" class="headerlink" title="9) JDK 8u40 å¹¶å‘æ ‡è®°ç±»å¸è½½"></a>9) JDK 8u40 å¹¶å‘æ ‡è®°ç±»å¸è½½</h4><ul>
<li>æ‰€æœ‰å¯¹è±¡éƒ½ç»è¿‡å¹¶å‘æ ‡è®°åï¼Œå°±èƒ½çŸ¥é“å“ªäº›ç±»ä¸å†è¢«ä½¿ç”¨ï¼Œå½“ä¸€ä¸ªç±»åŠ è½½å™¨çš„æ‰€æœ‰ç±»éƒ½ä¸å†ä½¿ç”¨ï¼Œåˆ™å¸ è½½å®ƒæ‰€åŠ è½½çš„æ‰€æœ‰ç±»</li>
<li><code>-XX:+ClassUnloadingWithConcurrentMark</code> é»˜è®¤å¯ç”¨</li>
</ul>
<h4 id="10-JDK-8u60-å›æ”¶å·¨å‹å¯¹è±¡"><a href="#10-JDK-8u60-å›æ”¶å·¨å‹å¯¹è±¡" class="headerlink" title="10) JDK 8u60 å›æ”¶å·¨å‹å¯¹è±¡"></a>10) JDK 8u60 å›æ”¶å·¨å‹å¯¹è±¡</h4><ul>
<li>ä¸€ä¸ªå¯¹è±¡å¤§äº region çš„ä¸€åŠæ—¶ï¼Œç§°ä¹‹ä¸ºå·¨å‹å¯¹è±¡ </li>
<li>G1 ä¸ä¼šå¯¹å·¨å‹å¯¹è±¡è¿›è¡Œæ‹·è´</li>
<li>å›æ”¶æ—¶è¢«ä¼˜å…ˆè€ƒè™‘ </li>
<li>G1 ä¼šè·Ÿè¸ªè€å¹´ä»£æ‰€æœ‰ <code>incoming</code> å¼•ç”¨ï¼Œè¿™æ ·è€å¹´ä»£ <code>incoming</code> å¼•ç”¨ä¸º0 çš„å·¨å‹å¯¹è±¡å°±å¯ä»¥åœ¨æ–°ç”Ÿ ä»£åƒåœ¾å›æ”¶æ—¶å¤„ç†æ‰<ul>
<li>ç†è§£ï¼šå…¥åº¦ä¸º0æ—¶å›æ”¶<br><img src="https://picgo-1314714026.cos.ap-nanjing.myqcloud.com/img/image-20251028230520578.png"></li>
</ul>
</li>
</ul>
<h4 id="11-JDK-9-å¹¶å‘æ ‡è®°èµ·å§‹æ—¶é—´çš„è°ƒæ•´"><a href="#11-JDK-9-å¹¶å‘æ ‡è®°èµ·å§‹æ—¶é—´çš„è°ƒæ•´" class="headerlink" title="11) JDK 9 å¹¶å‘æ ‡è®°èµ·å§‹æ—¶é—´çš„è°ƒæ•´"></a>11) JDK 9 å¹¶å‘æ ‡è®°èµ·å§‹æ—¶é—´çš„è°ƒæ•´</h4><ul>
<li>å¹¶å‘æ ‡è®°å¿…é¡»åœ¨å †ç©ºé—´å æ»¡å‰å®Œæˆï¼Œå¦åˆ™é€€åŒ–ä¸º FullGC </li>
<li>JDK 9 ä¹‹å‰éœ€è¦ä½¿ç”¨ <code>-XX:InitiatingHeapOccupancyPercent</code> </li>
<li>JDK 9 å¯ä»¥åŠ¨æ€è°ƒæ•´<ul>
<li><code>-XX:InitiatingHeapOccupancyPercent</code> ç”¨æ¥è®¾ç½®åˆå§‹å€¼</li>
<li>è¿›è¡Œæ•°æ®é‡‡æ ·å¹¶åŠ¨æ€è°ƒæ•´ </li>
<li>æ€»ä¼šæ·»åŠ ä¸€ä¸ªå®‰å…¨çš„ç©ºæ¡£ç©ºé—´</li>
</ul>
</li>
</ul>
<h4 id="12-JDK-9-æ›´é«˜æ•ˆçš„å›æ”¶"><a href="#12-JDK-9-æ›´é«˜æ•ˆçš„å›æ”¶" class="headerlink" title="12) JDK 9 æ›´é«˜æ•ˆçš„å›æ”¶"></a>12) JDK 9 æ›´é«˜æ•ˆçš„å›æ”¶</h4><ul>
<li>250+å¢å¼º </li>
<li>180+bugä¿®å¤</li>
<li><a target="_blank" rel="noopener" href="https://docs.oracle.com/en/java/javase/12/gctuning/">https://docs.oracle.com/en/java/javase/12/gctuning/</a></li>
</ul>
<h2 id="5-åƒåœ¾å›æ”¶è°ƒä¼˜"><a href="#5-åƒåœ¾å›æ”¶è°ƒä¼˜" class="headerlink" title="5. åƒåœ¾å›æ”¶è°ƒä¼˜"></a>5. åƒåœ¾å›æ”¶è°ƒä¼˜</h2><ul>
<li>é¢„å¤‡çŸ¥è¯† <ul>
<li>æŒæ¡ GC ç›¸å…³çš„ VM å‚æ•°ï¼Œä¼šåŸºæœ¬çš„ç©ºé—´è°ƒæ•´ </li>
<li>æŒæ¡ç›¸å…³å·¥å…· </li>
<li>æ˜ç™½ä¸€ç‚¹ï¼šè°ƒä¼˜è·Ÿåº”ç”¨ã€ç¯å¢ƒæœ‰å…³ï¼Œæ²¡æœ‰æ”¾ä¹‹å››æµ·è€Œçš†å‡†çš„æ³•åˆ™</li>
</ul>
</li>
</ul>
<h3 id="5-1-è°ƒä¼˜é¢†åŸŸ"><a href="#5-1-è°ƒä¼˜é¢†åŸŸ" class="headerlink" title="5.1 è°ƒä¼˜é¢†åŸŸ"></a>5.1 è°ƒä¼˜é¢†åŸŸ</h3><ul>
<li>å†…å­˜ </li>
<li>é”ç«äº‰ </li>
<li>cpu </li>
<li>å ç”¨ io</li>
</ul>
<h3 id="5-2-ç¡®å®šç›®æ ‡"><a href="#5-2-ç¡®å®šç›®æ ‡" class="headerlink" title="5.2 ç¡®å®šç›®æ ‡"></a>5.2 ç¡®å®šç›®æ ‡</h3><ul>
<li>ã€ä½å»¶è¿Ÿã€‘è¿˜æ˜¯ã€é«˜ååé‡ã€‘ï¼Œé€‰æ‹©åˆé€‚çš„å›æ”¶å™¨ </li>
<li>CMSï¼ŒG1ï¼ŒZGC ï¼ˆä½å»¶è¿Ÿï¼‰</li>
<li>ParallelGC ï¼ˆé«˜ååï¼‰</li>
<li>Zing</li>
</ul>
<h3 id="5-3-æœ€å¿«çš„-GCæ˜¯ä¸å‘ç”Ÿ-GC"><a href="#5-3-æœ€å¿«çš„-GCæ˜¯ä¸å‘ç”Ÿ-GC" class="headerlink" title="5.3 æœ€å¿«çš„ GCæ˜¯ä¸å‘ç”Ÿ GC"></a>5.3 æœ€å¿«çš„ GCæ˜¯ä¸å‘ç”Ÿ GC</h3><ul>
<li>æŸ¥çœ‹ FullGC å‰åçš„å†…å­˜å ç”¨ï¼Œè€ƒè™‘ä¸‹é¢å‡ ä¸ªé—®é¢˜<ul>
<li>æ•°æ®æ˜¯ä¸æ˜¯å¤ªå¤šï¼Ÿ<ul>
<li>resultSet &#x3D; statement.executeQuery(â€œselect * from å¤§è¡¨ limit nâ€)</li>
<li><code>select * from å¤§è¡¨</code> åŠ è½½æ‰€æœ‰æ•°æ®åˆ°å†…å­˜</li>
</ul>
</li>
<li>æ•°æ®è¡¨ç¤ºæ˜¯å¦å¤ªè‡ƒè‚¿ï¼Ÿ <ul>
<li>å¯¹è±¡å›¾ </li>
<li>å¯¹è±¡å¤§å° 16ï¼› Integer 24ï¼› int 4</li>
</ul>
</li>
<li>æ˜¯å¦å­˜åœ¨å†…å­˜æ³„æ¼ï¼Ÿ <ul>
<li>static Map map &#x3D; </li>
<li>è½¯ </li>
<li>å¼± </li>
<li>ç¬¬ä¸‰æ–¹ç¼“å­˜å®ç°</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="5-4-æ–°ç”Ÿä»£è°ƒä¼˜"><a href="#5-4-æ–°ç”Ÿä»£è°ƒä¼˜" class="headerlink" title="5.4 æ–°ç”Ÿä»£è°ƒä¼˜"></a>5.4 æ–°ç”Ÿä»£è°ƒä¼˜</h3><ul>
<li><p>æ–°ç”Ÿä»£çš„ç‰¹ç‚¹</p>
<ul>
<li>æ‰€æœ‰çš„ new æ“ä½œçš„å†…å­˜åˆ†é…éå¸¸å»‰ä»· <ul>
<li>TLAB <code>thread-local allocation buffer</code> çº¿ç¨‹å±€éƒ¨çš„</li>
</ul>
</li>
<li>æ­»äº¡å¯¹è±¡çš„å›æ”¶ä»£ä»·æ˜¯é›¶ ï¼ˆæ­»äº¡å¯¹è±¡å†…å­˜ä¸º0ï¼Œ <code>å¤åˆ¶ç®—æ³•</code>ä»£ä»·0ï¼‰</li>
<li>å¤§éƒ¨åˆ†å¯¹è±¡ç”¨è¿‡å³æ­» </li>
<li>Minor GC çš„æ—¶é—´è¿œè¿œä½äº Full GC</li>
</ul>
</li>
<li><p>è¶Šå¤§è¶Šå¥½å—ï¼Ÿ<br>-Xmn </p>
</li>
<li><p>Sets the initial and maximum size (in bytes) of the heap for the young generation (nursery). GC is performed in this region more often than in other regions. If the size for the young generation is too small, then a lot of minor garbage collections are performed. If the size is too large, then only full garbage collections are performed, which can take a long time to complete. Oracle recommends that you keep the size for the young generation greater than 25% and less than 50% of the overall heap size</p>
</li>
<li><p>è®¾ç½®å¹´è½»ä»£ï¼ˆ nurseryï¼‰çš„åˆå§‹å’Œæœ€å¤§å¤§å°ï¼ˆä»¥å­—èŠ‚ä¸ºå•ä½ï¼‰ã€‚åƒåœ¾å›æ”¶åœ¨è¿™ä¸ªåŒºåŸŸæ¯”åœ¨å…¶ä»–åŒºåŸŸè¿›è¡Œå¾—æ›´é¢‘ç¹ã€‚å¦‚æœå¹´è½»ä»£çš„å¤§å°å¤ªå°ï¼Œå°±ä¼šè¿›è¡Œå¾ˆå¤šæ¬¡ Minor GCã€‚å¦‚æœå¤§å°å¤ªå¤§ï¼Œå°±åªä¼šè¿›è¡Œ Full GCï¼Œè¿™å¯èƒ½ä¼šèŠ±è´¹å¾ˆé•¿æ—¶é—´å®Œæˆã€‚Oracle å»ºè®®å¹´<code>è½»ä»£çš„å¤§å°ä¿æŒåœ¨æ€»å †å¤§å°çš„ 25% åˆ° 50% ä¹‹é—´ã€‚</code></p>
</li>
<li><p>æ–°ç”Ÿä»£èƒ½å®¹çº³æ‰€æœ‰<code>ã€å¹¶å‘é‡ * (è¯·æ±‚-å“åº”)ã€‘</code>çš„æ•°æ® </p>
</li>
<li><p>å¹¸å­˜åŒºå¤§åˆ°èƒ½ä¿ç•™<code>ã€å½“å‰æ´»è·ƒå¯¹è±¡+éœ€è¦æ™‹å‡å¯¹è±¡ã€‘</code> </p>
</li>
<li><p>æ™‹å‡é˜ˆå€¼é…ç½®å¾—å½“ï¼Œè®©é•¿æ—¶é—´å­˜æ´»å¯¹è±¡å°½å¿«æ™‹å‡</p>
</li>
<li><p><code>-XX:MaxTenuringThreshold=threshold</code> æ™‹å‡é˜ˆå€¼</p>
</li>
<li><p><code>-XX:+PrintTenuringDistribution</code></p>
</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Desired survivor size 48286924 bytes, new threshold 10 (max 10) </span><br><span class="line">- age 1: 28992024 bytes, 28992024 total </span><br><span class="line">- age 2: 1366864 bytes, 30358888 total </span><br><span class="line">- age 3: 1425912 bytes, 31784800 total </span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<h3 id="5-5-è€å¹´ä»£è°ƒä¼˜"><a href="#5-5-è€å¹´ä»£è°ƒä¼˜" class="headerlink" title="5.5 è€å¹´ä»£è°ƒä¼˜"></a>5.5 è€å¹´ä»£è°ƒä¼˜</h3><p>ä»¥ CMS ä¸ºä¾‹</p>
<ul>
<li><strong>CMS çš„è€å¹´ä»£å†…å­˜è¶Šå¤§è¶Šå¥½</strong> </li>
<li>å…ˆå°è¯•ä¸åšè°ƒä¼˜ï¼Œå¦‚æœæ²¡æœ‰ Full GC é‚£ä¹ˆå·²ç»â€¦ï¼Œå¦åˆ™å…ˆå°è¯•è°ƒä¼˜æ–°ç”Ÿä»£ </li>
<li>è§‚å¯Ÿå‘ç”Ÿ Full GC æ—¶è€å¹´ä»£å†…å­˜å ç”¨ï¼Œå°†è€å¹´ä»£å†…å­˜é¢„è®¾è°ƒå¤§ 1&#x2F;4 ~ 1&#x2F;3<ul>
<li><code>-XX:CMSInitiatingOccupancyFraction=percent</code> </li>
<li>è€å¹´ä»£å æ¯”percentæ—¶å‘ç”Ÿå›æ”¶</li>
</ul>
</li>
</ul>
<h3 id="5-6-æ¡ˆä¾‹"><a href="#5-6-æ¡ˆä¾‹" class="headerlink" title="5.6 æ¡ˆä¾‹"></a>5.6 æ¡ˆä¾‹</h3><ul>
<li><strong>æ¡ˆä¾‹1ï¼š Full GC å’Œ Minor GCé¢‘ç¹</strong><ul>
<li>é€‚å½“å¢å¤§æ–°ç”Ÿä»£</li>
<li>å¢å¤§æ™‹å‡é˜ˆå€¼</li>
</ul>
</li>
<li>æ¡ˆä¾‹2 è¯·æ±‚é«˜å³°æœŸå‘ç”Ÿ Full GCï¼Œå•æ¬¡æš‚åœæ—¶é—´ç‰¹åˆ«é•¿ ï¼ˆCMSï¼‰<ul>
<li>æŸ¥çœ‹GCæ—¥å¿—</li>
<li>æŸ¥çœ‹å“ªä¸ªé˜¶æ®µæ—¶é—´é•¿ï¼ˆåˆå§‹æ ‡è®°ï¼Œå¹¶å‘æ ‡è®°ï¼Œé‡æ–°æ ‡è®°ï¼Œå¹¶å‘æ¸…ç†ï¼‰</li>
<li>ä¸€èˆ¬æ˜¯é‡æ–°æ ‡è®°æ—¶é—´é•¿</li>
<li>ä½¿ç”¨ <code>-XX:+CMSScavengeBeforeRemark</code> é‡æ–°æ ‡è®°å‰æ¸…ç†æ–°ç”Ÿä»£</li>
</ul>
</li>
<li>æ¡ˆä¾‹3 è€å¹´ä»£å……è£•æƒ…å†µä¸‹ï¼Œå‘ç”Ÿ Full GC ï¼ˆCMS jdk1.7ï¼‰</li>
</ul>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>æ–‡ç« ä½œè€…: </span><span class="post-copyright-info"><a href="https://youcyt.ltd">cyt</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>æ–‡ç« é“¾æ¥: </span><span class="post-copyright-info"><a href="https://youcyt.ltd/post/java%E5%AD%A6%E4%B9%A0/jvm/2JVM-%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6.html">https://youcyt.ltd/post/javaå­¦ä¹ /jvm/2JVM-åƒåœ¾å›æ”¶.html</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>ç‰ˆæƒå£°æ˜: </span><span class="post-copyright-info">æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜æ¥æº <a href="https://youcyt.ltd" target="_blank">cytçš„ç¬”è®°å±‹</a>ï¼</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/java/">java</a><a class="post-meta__tags" href="/tags/JVM/">JVM</a></div><div class="post-share"><div class="social-share" data-image="https://picgo-1314714026.cos.ap-nanjing.myqcloud.com/img/image-20251028145205154.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button"><i class="fas fa-qrcode"></i>èµåŠ©</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="/img/wechat.jpg" target="_blank"><img class="post-qr-code-img" src="/img/wechat.jpg" alt="å¾®ä¿¡"/></a><div class="post-qr-code-desc">å¾®ä¿¡</div></li><li class="reward-item"><a href="/img/alipay.jpg" target="_blank"><img class="post-qr-code-img" src="/img/alipay.jpg" alt="æ”¯ä»˜å®"/></a><div class="post-qr-code-desc">æ”¯ä»˜å®</div></li></ul></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/post/java%E5%AD%A6%E4%B9%A0/jvm/3%20%E7%B1%BB%E5%8A%A0%E8%BD%BD%E4%B8%8E%E5%AD%97%E8%8A%82%E7%A0%81%E6%8A%80%E6%9C%AF.html" title="JVM-3.ç±»åŠ è½½ä¸å­—èŠ‚ç æŠ€æœ¯"><img class="cover" src="https://picgo-1314714026.cos.ap-nanjing.myqcloud.com/img/image-20251030202626960.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="info"><div class="info-1"><div class="info-item-1">ä¸Šä¸€ç¯‡</div><div class="info-item-2">JVM-3.ç±»åŠ è½½ä¸å­—èŠ‚ç æŠ€æœ¯</div></div><div class="info-2"><div class="info-item-1">ä¸‰ã€ç±»åŠ è½½ä¸å­—èŠ‚ç æŠ€æœ¯ ç±»æ–‡ä»¶ç»“æ„  å­—èŠ‚ç æŒ‡ä»¤  ç¼–è¯‘æœŸå¤„ç†  ç±»åŠ è½½é˜¶æ®µ  ç±»åŠ è½½å™¨  è¿è¡ŒæœŸä¼˜åŒ–  1ã€ç±»æ–‡ä»¶ç»“æ„ä¸€ä¸ªç®€å•çš„ HelloWorld.java 123456// HelloWorld ç¤ºä¾‹ public class HelloWorld &#123;	public static void main(String[] args) &#123; 		System.out.println(&quot;hello world&quot;);    &#125; &#125;  æ‰§è¡Œ javac -parameters -d .HelloWorld.java 12javacæ˜¯ç¼–è¯‘ -dæ˜¯æ‰“åŒ… .æ˜¯ä»£è¡¨å½“å‰ç›®å½• HelloWorld.javaæ˜¯è¦ç¼–è¯‘çš„javaç¨‹åºä½ åœ¨cmdä¸‹ä½ è¾“å…¥çš„å‘½ä»¤è‚¯å®šæ˜¯æœ‰ç›®å½•çš„.æ¯”å¦‚å‰é¢æ˜¯C:\&gt;é‚£ä¹ˆä½ æ‰€è¾“å…¥çš„å‘½ä»¤å°±ä»£è¡¨åœ¨cç›˜æ ¹ç›®å½•ä¸‹è¿›è¡Œæ“ä½œ.å¦‚æœä½ æƒ³è¦æŠŠç”Ÿæˆçš„.classæ–‡ä»¶æ”¾åœ¨å…¶ä»–ä½ç½®æ¯”å¦‚dç›˜æ ¹ç›®å½•,é‚£ä¹ˆå‘½ä»¤å°±å˜ä¸ºjavac -d d:\ HelloWorld.java  ç¼–è¯‘ä¸º HelloWorld.class åæ˜¯è¿™æ ·çš„ æ ¹æ® JVM...</div></div></div></a><a class="pagination-related" href="/post/java%E5%AD%A6%E4%B9%A0/jvm/1JVM-%E5%86%85%E5%AD%98%E7%BB%93%E6%9E%84.html" title="JVM-1.å†…å­˜ç»“æ„"><img class="cover" src="https://picgo-1314714026.cos.ap-nanjing.myqcloud.com/img/image-20251021175134533.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="info text-right"><div class="info-1"><div class="info-item-1">ä¸‹ä¸€ç¯‡</div><div class="info-item-2">JVM-1.å†…å­˜ç»“æ„</div></div><div class="info-2"><div class="info-item-1">å¼•è¨€ä»€ä¹ˆæ˜¯JVM å®šä¹‰ï¼š  Java Virtual Machine - java ç¨‹åºçš„è¿è¡Œç¯å¢ƒï¼ˆjava äºŒè¿›åˆ¶å­—èŠ‚ç çš„è¿è¡Œç¯å¢ƒï¼‰   å¥½å¤„ï¼š  ä¸€æ¬¡ç¼–å†™ï¼Œåˆ°å¤„è¿è¡Œ  è‡ªåŠ¨å†…å­˜ç®¡ç†ï¼Œåƒåœ¾å›æ”¶åŠŸèƒ½  æ•°ç»„ä¸‹æ ‡è¶Šç•Œæ£€æŸ¥ å¤šæ€ æ¯”è¾ƒï¼š jvm jre jdk å¤šæ€   æ¯”è¾ƒï¼š jvm jre jdk åŸºç¡€ç±»åº“ï¼š IO Listç­‰ ç¼–è¯‘å·¥å…·ï¼šjavac å†…å­˜ç›‘æµ‹å·¥å…·     å­¦jvmæœ‰ä»€ä¹ˆç”¨ é¢è¯•  ç†è§£åº•å±‚çš„å®ç°åŸç†  ä¸­é«˜çº§ç¨‹åºå‘˜çš„å¿…å¤‡æŠ€èƒ½  å¸¸è§çš„JVM jVMæ˜¯ä¸€ç§è§„èŒƒ å®ç°å¾ˆå¤š æœ¬è¯¾ç¨‹è®²hotspot  å­¦ä¹ è·¯çº¿ ä¸€ã€å†…å­˜ç»“æ„1. ç¨‹åºè®¡æ•°å™¨ 1.1 å®šä¹‰Program Counter Register ç¨‹åºè®¡æ•°å™¨ï¼ˆå¯„å­˜å™¨ï¼‰  ä½œç”¨ æ˜¯è®°ä½ä¸‹ä¸€æ¡jvmæŒ‡ä»¤çš„æ‰§è¡Œåœ°å€   ç‰¹ç‚¹  æ˜¯çº¿ç¨‹ç§æœ‰çš„ ï¼ˆæ¯ä¸ªçº¿ç¨‹æœ‰å±äºè‡ªå·±çš„ç¨‹åºè®¡æ•°å™¨ï¼‰ ä¸ä¼šå­˜åœ¨å†…å­˜æº¢å‡º å”¯ä¸€ä¸€ä¸ªä¸ä¼šå†…å­˜æº¢å‡ºçš„åœ°æ–¹    1.2 ä½œç”¨ é€šè¿‡å¯„å­˜å™¨ï¼ˆCPUç»„ä»¶ï¼‰å®ç°javaç¨‹åºè®¡æ•°å™¨ å±è”½ç‰©ç†ç¡¬ä»¶    2.è™šæ‹Ÿæœºæ ˆ 2.1 å®šä¹‰ Java Virtual Machine Stacks ï¼ˆJava è™šæ‹Ÿæœºæ ˆï¼‰ æ¯ä¸ªçº¿ç¨‹...</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>ç›¸å…³æ¨è</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/post/java%E5%AD%A6%E4%B9%A0/jvm/1JVM-%E5%86%85%E5%AD%98%E7%BB%93%E6%9E%84.html" title="JVM-1.å†…å­˜ç»“æ„"><img class="cover" src="https://picgo-1314714026.cos.ap-nanjing.myqcloud.com/img/image-20251021175134533.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-10-24</div><div class="info-item-2">JVM-1.å†…å­˜ç»“æ„</div></div><div class="info-2"><div class="info-item-1">å¼•è¨€ä»€ä¹ˆæ˜¯JVM å®šä¹‰ï¼š  Java Virtual Machine - java ç¨‹åºçš„è¿è¡Œç¯å¢ƒï¼ˆjava äºŒè¿›åˆ¶å­—èŠ‚ç çš„è¿è¡Œç¯å¢ƒï¼‰   å¥½å¤„ï¼š  ä¸€æ¬¡ç¼–å†™ï¼Œåˆ°å¤„è¿è¡Œ  è‡ªåŠ¨å†…å­˜ç®¡ç†ï¼Œåƒåœ¾å›æ”¶åŠŸèƒ½  æ•°ç»„ä¸‹æ ‡è¶Šç•Œæ£€æŸ¥ å¤šæ€ æ¯”è¾ƒï¼š jvm jre jdk å¤šæ€   æ¯”è¾ƒï¼š jvm jre jdk åŸºç¡€ç±»åº“ï¼š IO Listç­‰ ç¼–è¯‘å·¥å…·ï¼šjavac å†…å­˜ç›‘æµ‹å·¥å…·     å­¦jvmæœ‰ä»€ä¹ˆç”¨ é¢è¯•  ç†è§£åº•å±‚çš„å®ç°åŸç†  ä¸­é«˜çº§ç¨‹åºå‘˜çš„å¿…å¤‡æŠ€èƒ½  å¸¸è§çš„JVM jVMæ˜¯ä¸€ç§è§„èŒƒ å®ç°å¾ˆå¤š æœ¬è¯¾ç¨‹è®²hotspot  å­¦ä¹ è·¯çº¿ ä¸€ã€å†…å­˜ç»“æ„1. ç¨‹åºè®¡æ•°å™¨ 1.1 å®šä¹‰Program Counter Register ç¨‹åºè®¡æ•°å™¨ï¼ˆå¯„å­˜å™¨ï¼‰  ä½œç”¨ æ˜¯è®°ä½ä¸‹ä¸€æ¡jvmæŒ‡ä»¤çš„æ‰§è¡Œåœ°å€   ç‰¹ç‚¹  æ˜¯çº¿ç¨‹ç§æœ‰çš„ ï¼ˆæ¯ä¸ªçº¿ç¨‹æœ‰å±äºè‡ªå·±çš„ç¨‹åºè®¡æ•°å™¨ï¼‰ ä¸ä¼šå­˜åœ¨å†…å­˜æº¢å‡º å”¯ä¸€ä¸€ä¸ªä¸ä¼šå†…å­˜æº¢å‡ºçš„åœ°æ–¹    1.2 ä½œç”¨ é€šè¿‡å¯„å­˜å™¨ï¼ˆCPUç»„ä»¶ï¼‰å®ç°javaç¨‹åºè®¡æ•°å™¨ å±è”½ç‰©ç†ç¡¬ä»¶    2.è™šæ‹Ÿæœºæ ˆ 2.1 å®šä¹‰ Java Virtual Machine Stacks ï¼ˆJava è™šæ‹Ÿæœºæ ˆï¼‰ æ¯ä¸ªçº¿ç¨‹...</div></div></div></a><a class="pagination-related" href="/post/java%E5%AD%A6%E4%B9%A0/jvm/4%20%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B.html" title="JVM-4.å†…å­˜æ¨¡å‹"><img class="cover" src="https://picgo-1314714026.cos.ap-nanjing.myqcloud.com/img/image-20251104181307371.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-11-04</div><div class="info-item-2">JVM-4.å†…å­˜æ¨¡å‹</div></div><div class="info-2"><div class="info-item-1">å†…å­˜æ¨¡å‹1. java å†…å­˜æ¨¡å‹å¾ˆå¤šäººå°†ã€java å†…å­˜ç»“æ„ã€‘ä¸ã€java å†…å­˜æ¨¡å‹ã€‘å‚»å‚»åˆ†ä¸æ¸…ï¼Œã€java å†…å­˜æ¨¡å‹ã€‘æ˜¯ Java Memory Modelï¼ˆJMMï¼‰çš„æ„æ€ã€‚ ç®€å•çš„è¯´ï¼ŒJMM å®šä¹‰äº†ä¸€å¥—åœ¨å¤šçº¿ç¨‹è¯»å†™å…±äº«æ•°æ®æ—¶ï¼ˆæˆå‘˜å˜é‡ã€æ•°ç»„ï¼‰æ—¶ï¼Œå¯¹æ•°æ®çš„å¯è§æ€§ã€æœ‰åº æ€§ã€å’ŒåŸå­æ€§çš„è§„åˆ™å’Œä¿éšœ 1.1 åŸå­æ€§åŸå­æ€§åœ¨å­¦ä¹ çº¿ç¨‹æ—¶è®²è¿‡ï¼Œä¸‹é¢æ¥ä¸ªä¾‹å­ç®€å•å›é¡¾ä¸€ä¸‹ï¼šé—®é¢˜æå‡ºï¼Œä¸¤ä¸ªçº¿ç¨‹å¯¹åˆå§‹å€¼ä¸º 0 çš„é™æ€å˜é‡ä¸€ä¸ªåšè‡ªå¢ï¼Œä¸€ä¸ªåšè‡ªå‡ï¼Œå„åš 5000 æ¬¡ï¼Œç»“æœæ˜¯ 0 å—ï¼Ÿ 1.2 é—®é¢˜åˆ†æä»¥ä¸Šçš„ç»“æœå¯èƒ½æ˜¯æ­£æ•°ã€è´Ÿæ•°ã€é›¶ã€‚ä¸ºä»€ä¹ˆå‘¢ï¼Ÿå› ä¸º Java ä¸­å¯¹é™æ€å˜é‡çš„è‡ªå¢ï¼Œè‡ªå‡å¹¶ä¸æ˜¯åŸå­æ“ ä½œã€‚  ä¾‹å¦‚å¯¹äº i++ è€Œè¨€ï¼ˆi ä¸ºé™æ€å˜é‡ï¼‰ï¼Œå®é™…ä¼šäº§ç”Ÿå¦‚ä¸‹çš„ JVM å­—èŠ‚ç æŒ‡ä»¤ï¼š  1234getstatic i // è·å–é™æ€å˜é‡içš„å€¼ iconst_1 // å‡†å¤‡å¸¸é‡1 iadd // åŠ æ³• putstatic i // å°†ä¿®æ”¹åçš„å€¼å­˜å…¥é™æ€å˜é‡  è€Œå¯¹åº” iâ€“ ä¹Ÿæ˜¯ç±»ä¼¼ï¼š  1234getstatic i // è·å–é™æ€å˜é‡içš„å€¼ iconst_1 // å‡†å¤‡å¸¸é‡1 isub // å‡æ³• pu...</div></div></div></a><a class="pagination-related" href="/post/java%E5%AD%A6%E4%B9%A0/jvm/3%20%E7%B1%BB%E5%8A%A0%E8%BD%BD%E4%B8%8E%E5%AD%97%E8%8A%82%E7%A0%81%E6%8A%80%E6%9C%AF.html" title="JVM-3.ç±»åŠ è½½ä¸å­—èŠ‚ç æŠ€æœ¯"><img class="cover" src="https://picgo-1314714026.cos.ap-nanjing.myqcloud.com/img/image-20251030202626960.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-11-03</div><div class="info-item-2">JVM-3.ç±»åŠ è½½ä¸å­—èŠ‚ç æŠ€æœ¯</div></div><div class="info-2"><div class="info-item-1">ä¸‰ã€ç±»åŠ è½½ä¸å­—èŠ‚ç æŠ€æœ¯ ç±»æ–‡ä»¶ç»“æ„  å­—èŠ‚ç æŒ‡ä»¤  ç¼–è¯‘æœŸå¤„ç†  ç±»åŠ è½½é˜¶æ®µ  ç±»åŠ è½½å™¨  è¿è¡ŒæœŸä¼˜åŒ–  1ã€ç±»æ–‡ä»¶ç»“æ„ä¸€ä¸ªç®€å•çš„ HelloWorld.java 123456// HelloWorld ç¤ºä¾‹ public class HelloWorld &#123;	public static void main(String[] args) &#123; 		System.out.println(&quot;hello world&quot;);    &#125; &#125;  æ‰§è¡Œ javac -parameters -d .HelloWorld.java 12javacæ˜¯ç¼–è¯‘ -dæ˜¯æ‰“åŒ… .æ˜¯ä»£è¡¨å½“å‰ç›®å½• HelloWorld.javaæ˜¯è¦ç¼–è¯‘çš„javaç¨‹åºä½ åœ¨cmdä¸‹ä½ è¾“å…¥çš„å‘½ä»¤è‚¯å®šæ˜¯æœ‰ç›®å½•çš„.æ¯”å¦‚å‰é¢æ˜¯C:\&gt;é‚£ä¹ˆä½ æ‰€è¾“å…¥çš„å‘½ä»¤å°±ä»£è¡¨åœ¨cç›˜æ ¹ç›®å½•ä¸‹è¿›è¡Œæ“ä½œ.å¦‚æœä½ æƒ³è¦æŠŠç”Ÿæˆçš„.classæ–‡ä»¶æ”¾åœ¨å…¶ä»–ä½ç½®æ¯”å¦‚dç›˜æ ¹ç›®å½•,é‚£ä¹ˆå‘½ä»¤å°±å˜ä¸ºjavac -d d:\ HelloWorld.java  ç¼–è¯‘ä¸º HelloWorld.class åæ˜¯è¿™æ ·çš„ æ ¹æ® JVM...</div></div></div></a><a class="pagination-related" href="/post/java%E5%9F%BA%E7%A1%80/java8.html" title="java8"><img class="cover" src="/img/cover/8.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2023-08-18</div><div class="info-item-2">java8</div></div><div class="info-2"><div class="info-item-1"> å‡½æ•°å¼ç¼–ç¨‹â€“stream æµ  æ¦‚è¿°ä¸ºä»€ä¹ˆå­¦  å‡½æ•°å¼ç¼–ç¨‹æ€æƒ³ Lambda è¡¨è¾¾å¼æ¦‚è¿° ä½¿ç”¨æƒ…å†µ å‚æ•°ä¸ºä¸€ä¸ªæ¥å£ï¼Œå¹¶ä¸”åªæœ‰ä¸€ä¸ªæŠ½è±¡æ–¹æ³• ï¼ˆä¸åŒ…å«æŠ½è±¡æ–¹æ³•|ï¼‰ ä¾‹å¦‚ï¼š   ä¾‹ä¾‹ 1 ä¾‹ 2 ä¾‹ 4 ä¾‹ 5 âœ¨ çœç•¥è§„åˆ™    Stream æµhttps://www.bilibili.com/video/BV1Gh41187uR?p=12&amp;spm_id_from=pageDriver&amp;vd_source=30924cc6debe913490fb34d7e3b62fdd æ¦‚è¿° åˆå§‹åŒ–å·¥ç¨‹12345678910111213141516171819202122232425262728293031323334353637public class StreamDemo &#123;    public static void main(String[] args) &#123;        List&lt;Author&gt; authors = getAuthors();        System.out.println(authors);    &#125;    ...</div></div></div></a><a class="pagination-related" href="/post/java%E5%AD%A6%E4%B9%A0/juc/2.%E8%BF%9B%E7%A8%8B%E4%B8%8E%E7%BA%BF%E7%A8%8B.html" title="JUC-2.è¿›ç¨‹ä¸çº¿ç¨‹"><img class="cover" src="https://picgo-1314714026.cos.ap-nanjing.myqcloud.com/img/image-20251105130710922.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-11-05</div><div class="info-item-2">JUC-2.è¿›ç¨‹ä¸çº¿ç¨‹</div></div><div class="info-2"><div class="info-item-1">1. æ¦‚è§ˆå¤§çº² é¢„å¤‡çŸ¥è¯† å¸Œæœ›ä½ ä¸æ˜¯ä¸€ä¸ªåˆå­¦è€…  çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼Œéœ€è¦ä½ æ¥è§¦è¿‡ Java Web å¼€å‘ã€Jdbc å¼€å‘ã€Web æœåŠ¡å™¨ã€åˆ†å¸ƒå¼æ¡†æ¶æ—¶æ‰ä¼šé‡åˆ°  åŸºäº JDK 8ï¼Œæœ€å¥½å¯¹å‡½æ•°å¼ç¼–ç¨‹ã€lambda æœ‰ä¸€å®šäº†è§£  é‡‡ç”¨äº† slf4j æ‰“å°æ—¥å¿—ï¼Œè¿™æ˜¯å¥½çš„å®è·µ  é‡‡ç”¨äº† lombok ç®€åŒ– java bean ç¼–å†™  ç»™æ¯ä¸ªçº¿ç¨‹å¥½åå­—ï¼Œè¿™ä¹Ÿæ˜¯ä¸€é¡¹å¥½çš„å®è·µ  2.è¿›ç¨‹ä¸çº¿ç¨‹æœ¬ç« å†…å®¹ è¿›ç¨‹å’Œçº¿ç¨‹çš„æ¦‚å¿µ  å¹¶è¡Œå’Œå¹¶å‘çš„æ¦‚å¿µ  çº¿ç¨‹åŸºæœ¬åº”ç”¨  2.1 è¿›ç¨‹ä¸çº¿ç¨‹è¿›ç¨‹ ç¨‹åºç”±æŒ‡ä»¤å’Œæ•°æ®ç»„æˆï¼Œä½†è¿™äº›æŒ‡ä»¤è¦è¿è¡Œï¼Œæ•°æ®è¦è¯»å†™ï¼Œå°±å¿…é¡»å°†æŒ‡ä»¤åŠ è½½è‡³ CPUï¼Œæ•°æ®åŠ è½½è‡³å†…å­˜ã€‚åœ¨ æŒ‡ä»¤è¿è¡Œè¿‡ç¨‹ä¸­è¿˜éœ€è¦ç”¨åˆ°ç£ç›˜ã€ç½‘ç»œç­‰è®¾å¤‡ã€‚è¿›ç¨‹å°±æ˜¯ç”¨æ¥åŠ è½½æŒ‡ä»¤ã€ç®¡ç†å†…å­˜ã€ç®¡ç† IO çš„ ã€‚ å½“ä¸€ä¸ªç¨‹åºè¢«è¿è¡Œï¼Œä»ç£ç›˜åŠ è½½è¿™ä¸ªç¨‹åºçš„ä»£ç è‡³å†…å­˜ï¼Œè¿™æ—¶å°±å¼€å¯äº†ä¸€ä¸ªè¿›ç¨‹ã€‚  è¿›ç¨‹å°±å¯ä»¥è§†ä¸ºç¨‹åºçš„ä¸€ä¸ªå®ä¾‹ã€‚å¤§éƒ¨åˆ†ç¨‹åºå¯ä»¥åŒæ—¶è¿è¡Œå¤šä¸ªå®ä¾‹è¿›ç¨‹ï¼ˆä¾‹å¦‚è®°äº‹æœ¬ã€ç”»å›¾ã€æµè§ˆå™¨ ç­‰ï¼‰ï¼Œä¹Ÿæœ‰çš„ç¨‹åºåªèƒ½å¯åŠ¨ä¸€ä¸ªå®ä¾‹è¿›ç¨‹ï¼ˆä¾‹å¦‚ç½‘æ˜“äº‘éŸ³ä¹ã€360 å®‰å…¨å«å£«ç­‰ï¼‰  çº¿ç¨‹ ä¸€ä¸ªè¿›ç¨‹ä¹‹å†…å¯ä»¥åˆ†ä¸ºä¸€åˆ°å¤šä¸ªçº¿ç¨‹ã€‚  ä¸€ä¸ªçº¿ç¨‹å°±æ˜¯ä¸€ä¸ªæŒ‡ä»¤æµï¼Œå°†æŒ‡ä»¤æµä¸­çš„ä¸€æ¡æ¡...</div></div></div></a><a class="pagination-related" href="/post/java%E5%AD%A6%E4%B9%A0/juc/3.Java%20%E7%BA%BF%E7%A8%8B.html" title="JUC-3.Java çº¿ç¨‹"><img class="cover" src="https://picgo-1314714026.cos.ap-nanjing.myqcloud.com/img/image-20251105143707988.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-11-06</div><div class="info-item-2">JUC-3.Java çº¿ç¨‹</div></div><div class="info-2"><div class="info-item-1">3.Java çº¿ç¨‹æœ¬ç« å†…å®¹ åˆ›å»ºå’Œè¿è¡Œçº¿ç¨‹  æŸ¥çœ‹çº¿ç¨‹  çº¿ç¨‹ API  çº¿ç¨‹çŠ¶æ€  3.1 åˆ›å»ºå’Œè¿è¡Œçº¿ç¨‹æ–¹æ³•ä¸€ï¼Œç›´æ¥ä½¿ç”¨ Thread12345678// åˆ›å»ºçº¿ç¨‹å¯¹è±¡ ï¼ˆåŒ¿åå†…éƒ¨ç±»ï¼‰Thread t = new Thread() &#123;    public void run() &#123;        // è¦æ‰§è¡Œçš„ä»»åŠ¡    &#125;&#125;;// å¯åŠ¨çº¿ç¨‹t.start();  ä¾‹å¦‚ï¼š 123456789// æ„é€ æ–¹æ³•çš„å‚æ•°æ˜¯ç»™çº¿ç¨‹æŒ‡å®šåå­—ï¼Œæ¨èThread t1 = new Thread(&quot;t1&quot;) &#123;    @Override    // run æ–¹æ³•å†…å®ç°äº†è¦æ‰§è¡Œçš„ä»»åŠ¡    public void run() &#123;        log.debug(&quot;hello&quot;);    &#125;&#125;;t1.start();  è¾“å‡ºï¼š 119:19:00 [t1] c.ThreadStarter - hello  æ–¹æ³•äºŒï¼Œä½¿ç”¨ Runnable é…åˆ ThreadæŠŠã€çº¿ç¨‹ã€‘å’Œã€ä»»åŠ¡ã€‘ï¼ˆè¦æ‰§...</div></div></div></a></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/img/other/avatar.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">cyt</div><div class="author-info-description">å½’é€”ä¹Ÿè¿˜å¯çˆ±</div><div class="site-data"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">28</div></a><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">24</div></a><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">7</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons"><a class="social-icon" href="https://github.com/yigeyouzia" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="https://blog.csdn.net/c_cjwkwjsnsj" target="_blank" title="CSDN"><i class="fa fa-book-open"></i></a><a class="social-icon" href="tencent://AddContact/?fromId=45&amp;fromSubId=1&amp;subcmd=all&amp;uin=1793402316&amp;website=www.oicqzone.com" target="_blank" title="QQ"><i class="fab fa-qq"></i></a><a class="social-icon" href="mailto:1793402316@qq.com" target="_blank" title="Email"><i class="fas fa-envelope-open-text"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>å…¬å‘Š</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>ç›®å½•</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6"><span class="toc-number">1.</span> <span class="toc-text">äºŒã€åƒåœ¾å›æ”¶</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E5%A6%82%E4%BD%95%E5%88%A4%E6%96%AD%E5%AF%B9%E8%B1%A1%E5%8F%AF%E4%BB%A5%E5%9B%9E%E6%94%B6"><span class="toc-number">1.1.</span> <span class="toc-text">1. å¦‚ä½•åˆ¤æ–­å¯¹è±¡å¯ä»¥å›æ”¶</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1%E5%BC%95%E7%94%A8%E8%AE%A1%E6%95%B0%E6%B3%95"><span class="toc-number">1.1.1.</span> <span class="toc-text">1.1å¼•ç”¨è®¡æ•°æ³•</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-%E5%8F%AF%E8%BE%BE%E6%80%A7%E5%88%86%E6%9E%90%E8%AE%A1%E7%AE%97%E6%B3%95"><span class="toc-number">1.1.2.</span> <span class="toc-text">1.2 å¯è¾¾æ€§åˆ†æè®¡ç®—æ³•</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3-%E5%9B%9B%E7%A7%8D%E5%BC%95%E7%94%A8"><span class="toc-number">1.1.3.</span> <span class="toc-text">1.3 å››ç§å¼•ç”¨</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BC%BA%E8%BD%AF%E5%BC%B1"><span class="toc-number">1.1.3.1.</span> <span class="toc-text">å¼ºè½¯å¼±</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%99%9A%E7%BB%88"><span class="toc-number">1.1.3.2.</span> <span class="toc-text">è™šç»ˆ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BD%AF%E5%BC%95%E7%94%A8"><span class="toc-number">1.1.3.3.</span> <span class="toc-text">è½¯å¼•ç”¨</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BD%AF%E5%BC%95%E7%94%A8-%E5%BC%95%E7%94%A8%E9%98%9F%E5%88%97"><span class="toc-number">1.1.3.4.</span> <span class="toc-text">è½¯å¼•ç”¨+å¼•ç”¨é˜Ÿåˆ—</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BC%B1%E5%BC%95%E7%94%A8"><span class="toc-number">1.1.3.5.</span> <span class="toc-text">å¼±å¼•ç”¨</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E7%AE%97%E6%B3%95"><span class="toc-number">1.2.</span> <span class="toc-text">2. åƒåœ¾å›æ”¶ç®—æ³•</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-%E6%A0%87%E8%AE%B0%E6%B8%85%E9%99%A4%E6%B3%95"><span class="toc-number">1.2.1.</span> <span class="toc-text">2.1 æ ‡è®°æ¸…é™¤æ³•</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-%E6%A0%87%E8%AE%B0%E6%95%B4%E7%90%86"><span class="toc-number">1.2.2.</span> <span class="toc-text">2.2 æ ‡è®°æ•´ç†</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-%E5%A4%8D%E5%88%B6"><span class="toc-number">1.2.3.</span> <span class="toc-text">2.3 å¤åˆ¶</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-4-%E6%80%BB%E7%BB%93"><span class="toc-number">1.2.4.</span> <span class="toc-text">2.4 æ€»ç»“</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E5%88%86%E4%BB%A3%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6"><span class="toc-number">1.3.</span> <span class="toc-text">3. åˆ†ä»£åƒåœ¾å›æ”¶</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-%E7%9B%B8%E5%85%B3VM%E5%8F%82%E6%95%B0"><span class="toc-number">1.3.1.</span> <span class="toc-text">3.1 ç›¸å…³VMå‚æ•°</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-GC%E6%BC%94%E7%A4%BA"><span class="toc-number">1.3.2.</span> <span class="toc-text">3.2 GCæ¼”ç¤º</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E5%99%A8"><span class="toc-number">1.4.</span> <span class="toc-text">4. åƒåœ¾å›æ”¶å™¨</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-%E4%B8%B2%E8%A1%8C"><span class="toc-number">1.4.1.</span> <span class="toc-text">4.1 ä¸²è¡Œ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-%E5%90%9E%E5%90%90%E9%87%8F%E4%BC%98%E5%85%88"><span class="toc-number">1.4.2.</span> <span class="toc-text">4.2 ååé‡ä¼˜å…ˆ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3-%E5%93%8D%E5%BA%94%E6%97%B6%E9%97%B4%E4%BC%98%E5%85%88"><span class="toc-number">1.4.3.</span> <span class="toc-text">4.3 å“åº”æ—¶é—´ä¼˜å…ˆ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-G1-%EF%BC%88%E9%87%8D%E7%82%B9%EF%BC%89"><span class="toc-number">1.4.4.</span> <span class="toc-text">4.1 G1 ï¼ˆé‡ç‚¹ï¼‰</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1%EF%BC%89G1%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E9%98%B6%E6%AE%B5"><span class="toc-number">1.4.4.1.</span> <span class="toc-text">1ï¼‰G1åƒåœ¾å›æ”¶é˜¶æ®µ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2%EF%BC%89Young-Collection%EF%BC%88%E6%96%B0%E7%94%9F%E4%BB%A3%E5%9B%9E%E6%94%B6%EF%BC%89"><span class="toc-number">1.4.4.2.</span> <span class="toc-text">2ï¼‰Young Collectionï¼ˆæ–°ç”Ÿä»£å›æ”¶ï¼‰</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3%EF%BC%89Young-Collection-CM%EF%BC%88%E5%B9%B6%E5%8F%91%E6%A0%87%E8%AE%B0%EF%BC%89"><span class="toc-number">1.4.4.3.</span> <span class="toc-text">3ï¼‰Young Collection + CMï¼ˆå¹¶å‘æ ‡è®°ï¼‰</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4%EF%BC%89Mixed-Collection"><span class="toc-number">1.4.4.4.</span> <span class="toc-text">4ï¼‰Mixed Collection</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5%EF%BC%89-Full-GC"><span class="toc-number">1.4.4.5.</span> <span class="toc-text">5ï¼‰ Full GC</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-Young-Collection-%E8%B7%A8%E4%BB%A3%E5%BC%95%E7%94%A8"><span class="toc-number">1.4.4.6.</span> <span class="toc-text">6) Young Collection è·¨ä»£å¼•ç”¨</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-Remark%EF%BC%88%E9%87%8D%E6%96%B0%E6%A0%87%E8%AE%B0%EF%BC%89"><span class="toc-number">1.4.4.7.</span> <span class="toc-text">7) Remarkï¼ˆé‡æ–°æ ‡è®°ï¼‰</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-JDK-8u20-%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%8E%BB%E9%87%8D"><span class="toc-number">1.4.4.8.</span> <span class="toc-text">8) JDK 8u20 å­—ç¬¦ä¸²å»é‡</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9-JDK-8u40-%E5%B9%B6%E5%8F%91%E6%A0%87%E8%AE%B0%E7%B1%BB%E5%8D%B8%E8%BD%BD"><span class="toc-number">1.4.4.9.</span> <span class="toc-text">9) JDK 8u40 å¹¶å‘æ ‡è®°ç±»å¸è½½</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#10-JDK-8u60-%E5%9B%9E%E6%94%B6%E5%B7%A8%E5%9E%8B%E5%AF%B9%E8%B1%A1"><span class="toc-number">1.4.4.10.</span> <span class="toc-text">10) JDK 8u60 å›æ”¶å·¨å‹å¯¹è±¡</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#11-JDK-9-%E5%B9%B6%E5%8F%91%E6%A0%87%E8%AE%B0%E8%B5%B7%E5%A7%8B%E6%97%B6%E9%97%B4%E7%9A%84%E8%B0%83%E6%95%B4"><span class="toc-number">1.4.4.11.</span> <span class="toc-text">11) JDK 9 å¹¶å‘æ ‡è®°èµ·å§‹æ—¶é—´çš„è°ƒæ•´</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#12-JDK-9-%E6%9B%B4%E9%AB%98%E6%95%88%E7%9A%84%E5%9B%9E%E6%94%B6"><span class="toc-number">1.4.4.12.</span> <span class="toc-text">12) JDK 9 æ›´é«˜æ•ˆçš„å›æ”¶</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E8%B0%83%E4%BC%98"><span class="toc-number">1.5.</span> <span class="toc-text">5. åƒåœ¾å›æ”¶è°ƒä¼˜</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1-%E8%B0%83%E4%BC%98%E9%A2%86%E5%9F%9F"><span class="toc-number">1.5.1.</span> <span class="toc-text">5.1 è°ƒä¼˜é¢†åŸŸ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-2-%E7%A1%AE%E5%AE%9A%E7%9B%AE%E6%A0%87"><span class="toc-number">1.5.2.</span> <span class="toc-text">5.2 ç¡®å®šç›®æ ‡</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-3-%E6%9C%80%E5%BF%AB%E7%9A%84-GC%E6%98%AF%E4%B8%8D%E5%8F%91%E7%94%9F-GC"><span class="toc-number">1.5.3.</span> <span class="toc-text">5.3 æœ€å¿«çš„ GCæ˜¯ä¸å‘ç”Ÿ GC</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-4-%E6%96%B0%E7%94%9F%E4%BB%A3%E8%B0%83%E4%BC%98"><span class="toc-number">1.5.4.</span> <span class="toc-text">5.4 æ–°ç”Ÿä»£è°ƒä¼˜</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-5-%E8%80%81%E5%B9%B4%E4%BB%A3%E8%B0%83%E4%BC%98"><span class="toc-number">1.5.5.</span> <span class="toc-text">5.5 è€å¹´ä»£è°ƒä¼˜</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-6-%E6%A1%88%E4%BE%8B"><span class="toc-number">1.5.6.</span> <span class="toc-text">5.6 æ¡ˆä¾‹</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>æœ€æ–°æ–‡ç« </span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/post/java%E5%AD%A6%E4%B9%A0/juc/8.%E5%85%B1%E4%BA%AB%E6%A8%A1%E5%9E%8B%E4%B9%8B%E5%B7%A5%E5%85%B7.html" title="JUC-8.å…±äº«æ¨¡å‹ä¹‹å·¥å…·"><img src="https://picgo-1314714026.cos.ap-nanjing.myqcloud.com/img/5a752832-e095-46c0-8667-d19660d34eaf.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="JUC-8.å…±äº«æ¨¡å‹ä¹‹å·¥å…·"/></a><div class="content"><a class="title" href="/post/java%E5%AD%A6%E4%B9%A0/juc/8.%E5%85%B1%E4%BA%AB%E6%A8%A1%E5%9E%8B%E4%B9%8B%E5%B7%A5%E5%85%B7.html" title="JUC-8.å…±äº«æ¨¡å‹ä¹‹å·¥å…·">JUC-8.å…±äº«æ¨¡å‹ä¹‹å·¥å…·</a><time datetime="2025-11-15T11:02:00.000Z" title="å‘è¡¨äº 2025-11-15 19:02:00">2025-11-15</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/post/java%E5%AD%A6%E4%B9%A0/juc/7.%E5%85%B1%E4%BA%AB%E6%A8%A1%E5%9E%8B%E4%B9%8B%E4%B8%8D%E5%8F%AF%E5%8F%98.html" title="JUC-7.å…±äº«æ¨¡å‹ä¹‹ä¸å¯å˜"><img src="/img/cover/1.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="JUC-7.å…±äº«æ¨¡å‹ä¹‹ä¸å¯å˜"/></a><div class="content"><a class="title" href="/post/java%E5%AD%A6%E4%B9%A0/juc/7.%E5%85%B1%E4%BA%AB%E6%A8%A1%E5%9E%8B%E4%B9%8B%E4%B8%8D%E5%8F%AF%E5%8F%98.html" title="JUC-7.å…±äº«æ¨¡å‹ä¹‹ä¸å¯å˜">JUC-7.å…±äº«æ¨¡å‹ä¹‹ä¸å¯å˜</a><time datetime="2025-11-10T16:00:00.000Z" title="å‘è¡¨äº 2025-11-11 00:00:00">2025-11-11</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/post/java%E5%AD%A6%E4%B9%A0/juc/6.%E5%85%B1%E4%BA%AB%E6%A8%A1%E5%9E%8B%E4%B9%8B%E6%97%A0%E9%94%81.html" title="JUC-6.å…±äº«æ¨¡å‹ä¹‹æ— é”"><img src="https://picgo-1314714026.cos.ap-nanjing.myqcloud.com/img/53eb853d-d676-42f0-b245-9cafa6bd04a9.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="JUC-6.å…±äº«æ¨¡å‹ä¹‹æ— é”"/></a><div class="content"><a class="title" href="/post/java%E5%AD%A6%E4%B9%A0/juc/6.%E5%85%B1%E4%BA%AB%E6%A8%A1%E5%9E%8B%E4%B9%8B%E6%97%A0%E9%94%81.html" title="JUC-6.å…±äº«æ¨¡å‹ä¹‹æ— é”">JUC-6.å…±äº«æ¨¡å‹ä¹‹æ— é”</a><time datetime="2025-11-09T16:00:00.000Z" title="å‘è¡¨äº 2025-11-10 00:00:00">2025-11-10</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/post/java%E5%AD%A6%E4%B9%A0/juc/5.%E5%85%B1%E4%BA%AB%E6%A8%A1%E5%9E%8B%E4%B9%8B%E5%86%85%E5%AD%98.html" title="JUC-5.å…±äº«æ¨¡å‹ä¹‹å†…å­˜"><img src="https://picgo-1314714026.cos.ap-nanjing.myqcloud.com/img/502df1bc-0c14-465f-8cf9-5ebd6bbad194.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="JUC-5.å…±äº«æ¨¡å‹ä¹‹å†…å­˜"/></a><div class="content"><a class="title" href="/post/java%E5%AD%A6%E4%B9%A0/juc/5.%E5%85%B1%E4%BA%AB%E6%A8%A1%E5%9E%8B%E4%B9%8B%E5%86%85%E5%AD%98.html" title="JUC-5.å…±äº«æ¨¡å‹ä¹‹å†…å­˜">JUC-5.å…±äº«æ¨¡å‹ä¹‹å†…å­˜</a><time datetime="2025-11-07T16:00:00.000Z" title="å‘è¡¨äº 2025-11-08 00:00:00">2025-11-08</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/post/java%E5%AD%A6%E4%B9%A0/juc/4.%E5%85%B1%E4%BA%AB%E6%A8%A1%E5%9E%8B%E4%B9%8B%E7%AE%A1%E7%A8%8B.html" title="JUC-4.å…±äº«æ¨¡å‹ä¹‹ç®¡ç¨‹"><img src="https://picgo-1314714026.cos.ap-nanjing.myqcloud.com/img/92229416-d5bd-49cc-8ba4-6ac3106cda70.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="JUC-4.å…±äº«æ¨¡å‹ä¹‹ç®¡ç¨‹"/></a><div class="content"><a class="title" href="/post/java%E5%AD%A6%E4%B9%A0/juc/4.%E5%85%B1%E4%BA%AB%E6%A8%A1%E5%9E%8B%E4%B9%8B%E7%AE%A1%E7%A8%8B.html" title="JUC-4.å…±äº«æ¨¡å‹ä¹‹ç®¡ç¨‹">JUC-4.å…±äº«æ¨¡å‹ä¹‹ç®¡ç¨‹</a><time datetime="2025-11-06T16:00:00.000Z" title="å‘è¡¨äº 2025-11-07 00:00:00">2025-11-07</time></div></div></div></div></div></div></main><footer id="footer"><div class="footer-other"><div class="footer-copyright"><span class="copyright">&copy;&nbsp;2023 - 2025 By cyt</span></div><div class="footer_custom_text"><img src="https://haiyong.site/img/icp.png"><a href="https://beian.miit.gov.cn/#/Integrated/index"  style="color:white" target="_blank">èœ€ICPå¤‡2023010926å·</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="é˜…è¯»æ¨¡å¼"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="æ—¥é—´å’Œå¤œé—´æ¨¡å¼åˆ‡æ¢"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="å•æ å’ŒåŒæ åˆ‡æ¢"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="è®¾ç½®"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="ç›®å½•"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="å›åˆ°é¡¶éƒ¨"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><div class="js-pjax"><script>(() => {
  const abcjsInit = () => {
    const abcjsFn = () => {
      setTimeout(() => {
        const sheets = document.querySelectorAll(".abc-music-sheet")
        for (let i = 0; i < sheets.length; i++) {
          const ele = sheets[i]
          if (ele.children.length > 0) continue

          // Parse parameters from data-params attribute
          let params = {}
          const dp = ele.getAttribute("data-params")
          if (dp) {
            try {
              params = JSON.parse(dp)
            } catch (e) {
              console.error("Failed to parse data-params:", e)
            }
          }

          // Merge parsed parameters with the responsive option
          // Ensures params content appears before responsive
          const options = { ...params, responsive: "resize" }

          // Render the music score using ABCJS.renderAbc
          ABCJS.renderAbc(ele, ele.innerHTML, options)
        }
      }, 100)
    }

    if (typeof ABCJS === "object") {
      abcjsFn()
    } else {
      btf.getScript("https://cdn.jsdelivr.net/npm/abcjs/dist/abcjs-basic-min.min.js").then(abcjsFn)
    }
  }

  if (window.pjax) {
    abcjsInit()
  } else {
    window.addEventListener("load", abcjsInit)
  }

  btf.addGlobalFn("encrypt", abcjsInit, "abcjs")
})()</script></div><canvas class="fireworks" mobile="true"></canvas><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/fireworks.min.js"></script><script defer="defer" id="fluttering_ribbon" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-fluttering-ribbon.min.js"></script><script id="canvas_nest" defer="defer" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-nest.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = true;
POWERMODE.mobile = true;
document.body.addEventListener('input', POWERMODE);
</script><script id="click-heart" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/click-heart.min.js" async="async" mobile="false"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>